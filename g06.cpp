
#pragma warning(disable: 4312)
#pragma warning(disable: 4996)

#include "g06.h"

//
int main2( int argc, char *argv[] )
{
    GtkWidget * window;
    gtk_init( &argc, &argv );
    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    gtk_window_set_title( GTK_WINDOW(window), "hello c!!" );
    gtk_widget_show(window);
    gtk_main();
    return 0;
}



extern GtkWidget * m_frmMain;
extern GtkWidget * m_fixed;
static int  m_width;
static int  m_height;
//static std::map< std::string, SNavass >  v_maplabel;


//
static void add_fixed()
{
	m_fixed = gtk_fixed_new();

	gdk_threads_enter();
	gtk_widget_set_usize( m_fixed, m_width, m_height );
	gdk_threads_leave();

	gdk_threads_enter();
	gtk_container_add( GTK_CONTAINER(m_frmMain), m_fixed );
	gdk_threads_leave();

	gdk_threads_enter();
	gtk_widget_show(m_fixed);
	gdk_threads_leave();
}

//
int main3( int argc, char *argv[] )
{
	m_width = 640;
	m_height = 480;

	if ( !g_thread_supported() )
	{
		g_thread_init(NULL);
		gdk_threads_init();
	}
	
	gtk_init( NULL, NULL );

	m_frmMain = gtk_window_new(GTK_WINDOW_TOPLEVEL);
	gtk_window_set_title( GTK_WINDOW(m_frmMain), "GATE" );
	gtk_window_set_position(GTK_WINDOW(m_frmMain),GTK_WIN_POS_CENTER);
	gtk_widget_set_usize( m_frmMain, m_width, m_height );
	gtk_container_border_width( GTK_CONTAINER(m_frmMain), 1 );
	
	//gtk_window_set_decorated( GTK_WINDOW(m_frmMain), FALSE ); // no head
	//gtk_window_fullscreen( GTK_WINDOW(m_frmMain) ); // large 
	g_signal_connect( GTK_OBJECT(m_frmMain), "destroy", GTK_SIGNAL_FUNC(gtk_main_quit), NULL );

	add_fixed();
    gtk_widget_show(m_frmMain);


	PangoFontDescription *desc = pango_font_description_from_string("sans");
	gtk_widget_modify_font(m_frmMain, desc);
	gtk_widget_modify_font(m_fixed, desc);
	pango_font_description_free(desc);


	gdk_threads_enter();
	gtk_main();
	gdk_threads_leave();

    return 0;
}


void test2()
{
	int i;

	for(;;)
	{
		for( i = 0; i < 155; i++ )
		{
			GtkWidget *lblTest;
			
			//lblTest  = gtk_image_new_from_file("1.jpg");

			//gdk_threads_enter();
			//gtk_object_ref (GTK_OBJECT (lblTest));
			//gtk_object_sink (GTK_OBJECT (lblTest));
			//gdk_threads_leave();

			gdk_threads_enter();
			lblTest = gtk_label_new("aa");
			//gtk_fixed_put( GTK_FIXED(m_fixed), lblTest, i*2 , i );
			gtk_container_add( GTK_CONTAINER(m_frmMain), lblTest );
			gdk_threads_leave();



			gdk_threads_enter();
			gtk_widget_show( lblTest );
			//gtk_widget_show_all(gl_psimform->m_frmMain);
			gdk_threads_leave();

			//g_signal_connect( GTK_OBJECT(lblTest), "destroy", GTK_SIGNAL_FUNC(gtk_widget_destroy), NULL );


			WThrd::tr_sleepu( 0.005 );

			gdk_threads_enter();
			gtk_widget_destroy( lblTest );
			//gtk_object_unref(GTK_OBJECT (lblTest));
			//g_free(lblTest);

			gdk_threads_leave();
		}
	}
}


//
void test3()
{
	for( int i = 0; i < 22 ; i++ )
	{
		//gp_ui->LabelPrepStr( "3", "Œ“ «-" + SStrf::sltoa(i), 0.1, 0.2 );
		//gp_ui->LabelPrintPrep( "a", "bbbbbbb", 0.1, 0.3, 0.2 );
		//gp_ui->LabelPrintPrep( "c", "Œ“ «“ª∏ˆ∫√»Àƒ„ «“ª∏ˆªµ»À", 0.0, 0.0, 0.3 );
		gp_ui->LabelCommit();
		printf("%d\n", i );
		WThrd::tr_sleep( 0, 0.01 );
	}
}


//
void test4()
{
	//gp_ui->LabelMkPic( "a", "1.jpg", 0, 0 );
	//gp_ui->LabelCommit();
	//WThrd::tr_sleep( 0, 0.5 );
	//
	//gp_ui->LabelMkPic( "a", "0.jpg", 0, 0 );
	//gp_ui->LabelCommit();
	//WThrd::tr_sleep( 0, 0.5 );

	//gp_ui->LabelMkPic( "a", "2.jpg", 0, 0 );
	//gp_ui->LabelCommit();
	//WThrd::tr_sleep( 1 );

	//gp_ui->LabelMkPic( "a", "3.jpg", 0, 0 );
	//gp_ui->LabelCommit();
	//WThrd::tr_sleep( 1 );

	gp_ui->LabelMkPicPrep( 1, "back1", "back.jpg", 0, 0, 1, 1 );
	//gp_ui->LabelMkPicPrep( 1, "back2", "back.jpg", 0, 0 );
	gp_ui->LabelCommit();
}


//
void test_lbl()
{
	test4();
	test3();
	gp_ui->LabelMkDelPrep( "a" );
	gp_ui->LabelCommit();
}



//
void test_lbl_mem()
{
	//int iMax = 33;
	//int i;
	//double x, y;
	//std::string strNameStr;
	//std::string strNamePic;

	//do
	//{
	//	for( i = 0; i < iMax; i++ )
	//	{
	//		strNameStr = "s-" + SStrf::sltoa(i);
	//		strNamePic = SStrf::sltoa(i) + "pic";
	//		x = SStrf::rand1();
	//		y = SStrf::rand1();

	//		printf("%d x=%.2f y=%.2f\n", i, x, y );

	//		gp_ui->LabelMkPic( strNamePic, "1.jpg", x, y );
	//		gp_ui->LabelCommit();
	//		WThrd::tr_sleep( 0, 0.01 );

	//		gp_ui->LabelPrepStr( strNameStr, strNameStr, x, y, 0.05 );
	//		gp_ui->LabelCommit();
	//		WThrd::tr_sleep( 0, 0.01 );
	//	}

	//	//WThrd::tr_sleep( 1, 0.5 );
	//	
	//	for( i = 0; i < iMax; i++ )
	//	{
	//		strNameStr = "s-" + SStrf::sltoa(i);
	//		strNamePic = SStrf::sltoa(i) + "pic";

	//		printf("%d \n", i );

	//		gp_ui->LabelMkDelPrep( strNameStr );
	//		gp_ui->LabelCommit();
	//		WThrd::tr_sleep( 0, 0.01 );

	//		gp_ui->LabelMkDelPrep( strNamePic );
	//		gp_ui->LabelCommit();
	//		WThrd::tr_sleep( 0, 0.01 );
	//	}

	//	WThrd::tr_sleepu( 0.05 );

	//}while(1);
}



//
void test_key()
{
	//gp_ui->LabelPrepStr( "3", " «", 0.02, 0.92 );
	//gp_ui->LabelCommit();

	//gp_key->Clear();

	//for( int i = 0; i < 9999 ; i++ )
	//{
	//	std::string s1;

	//	s1 = gp_key->GetKey();

	//	if( s1.empty() ) 
	//	{
	//		WThrd::tr_sleep( 0, 0.25 );
	//		s1 = "empty";
	//	}
	//	else
	//	{
	//		s1=s1;
	//	}

	//	gp_ui->LabelPrepStr( "3", "Œ“ «:" + s1, 0.01, 0.92 );
	//	gp_ui->LabelCommit();
	//}
}



//
void test_reader()
{
	//tbool rc;
	//SCake ck;

	//rc = gp_enter->hzocom_open( gp_conf->Get_reader1_com_port() );

	//rc = gp_enter->a_4_1_1_reset( ck );
	//rc = gp_enter->a_4_1_2_ant( ck, 0x01 );
}



//
void test_printline()
{
	int i;

	do
	{
		for( i = 0; i < 33 ; i++ )
		{
			gp_ui->LineScrPrint( 1, "s-" + SStrf::sltoa(i) + SStrf::sltoa(i) + "pic" );
				 
			WThrd::tr_sleepu( 0.1 );
		}
		
		gp_ui->LineScrClear( 1 );
		
		WThrd::tr_sleepu( 0.5 );

	}while(1);


	while(1)
		WThrd::tr_sleep( 1 );
}



//
void test_uicskey()
{
	//gp_key->Clear();

	for( int i = 0; i < 9999 ; i++ )
	{
		std::string s1;
		std::vector< std::string > v1;

		//s1 = gp_key->GetKey();

		if( s1.empty() ) 
		{
			WThrd::tr_sleepu( 0.25 );
		}
		else
		{
			printf( "%s\n", s1.c_str() );
		}

		SStrvs::vsa_imp( s1, std::string("|"), 0, v1 );

		if( v1.size() >= 4 && v1[3] == "800" )
		{
			//gp_uics->SendCmd( "2|0|00000102|200|1|9|1|2|01020304|0102|10|8|0" ); 
			//gp_uics->SendCmd( "2|0|00000102|200|1|9|1|2|01020304|0102|10|8|0" ); 
			WThrd::tr_sleepu( 2 );
			//gp_uics->SendCmd( "3|0|200|3|3|1|2|2|2|" ); 
			//WThrd::tr_sleepu( 5 );
		}
	}
}


//
void test_set3014()
{
	a3014_t::ROWTYPE &r( gp_db->GetTheRowa3014() );
	unsigned char c1,c2,c3,c4;

	c1 = 0x12;
	c2 = 'Q';	
	c3 = 0x10;
	c4 = 0x44;

	r.m_CcNode.a[0] = c1;
	r.m_CcNode.a[1] = c2;
	r.m_CcNode.a[2] = 0;
	r.m_CcNode.a[3] = 0;
	r.m_CCNodecode1 = c1;
	r.m_CCNodecode2 = c2;
	r.m_CCNodecode3 = 0;
	r.m_CCNodecode4 = 0;

	r.m_ScNode.a[0] = c1;
	r.m_ScNode.a[1] = c2;
	r.m_ScNode.a[2] = c3;
	r.m_ScNode.a[3] = c4;
	r.m_SCNodecode1 = c1;
	r.m_SCNodecode2 = c2;
	r.m_SCNodecode3 = c3;
	r.m_SCNodecode4 = c4;

	r.m_EqpNode.a[0] = c1;
	r.m_EqpNode.a[1] = c2;
	r.m_EqpNode.a[2] = c3;
	r.m_EqpNode.a[3] = c4;
	r.m_EqpNodecode1 = c1;
	r.m_EqpNodecode2 = c2;
	r.m_EqpNodecode3 = c3;
	r.m_EqpNodecode4 = c4;

	gp_db->RiseSaveFlag(gp_db->m_a3014);
}



int test_coin3()
{
	gp_coin->dCoinHold();
	gp_coin->dCoin_Stop();
	
	b8701_t::ROWTYPE &Rb8701(gp_db->GetTheRowb8701());
	
	gp_coin->dCoin_Work( 1, 1 );

	while(1)
	{
		gp_coin->dCoin_Query();

		printf( "%d %d\n", Rb8701.m_CoinPollData.a[0] , Rb8701.m_CoinPollData.a[1] );

		WThrd::tr_sleep(1);

		if( Rb8701.m_CoinPollData.a[0] >= 2 ) 
			break;
	}
	
	//gp_coin->dCoin2CircleChg();
	gp_coin->dCoin2StoreBox();
	WThrd::tr_sleep(3);
	
	gp_coin->dCoinHold();
	gp_coin->dCoin_Stop();

	while(1)
		WThrd::tr_sleep(3);
}


int test_coin2()
{
	gp_coin->dCoin_Work( 1, 1 );

	b8701_t::ROWTYPE &Rb8701(gp_db->GetTheRowb8701());

	gp_coin->dCoinHold();
	WThrd::tr_sleep(1);
	gp_coin->dCoin2CircleChg();
	WThrd::tr_sleep(1);
	gp_coin->dCoin2StoreBox();
	WThrd::tr_sleep(1);
	gp_coin->dCoin2Return();
	WThrd::tr_sleep(1);


	while(1)
	{
		gp_coin->dCoin_Query();

		printf( "%d %d\n", Rb8701.m_CoinPollData.a[0] , Rb8701.m_CoinPollData.a[1] );

		WThrd::tr_sleep(1);

		if( Rb8701.m_CoinPollData.a[0] >= 2 ) 
			break;
	}

	gp_coin->dCoin_Stop();
	
	gp_coin->dCoin_Query();
	printf( "%d %d\n", Rb8701.m_CoinPollData.a[0] , Rb8701.m_CoinPollData.a[1] );

	gp_coin->dCoinOpenUplight();
	WThrd::tr_sleep(1);
	gp_coin->dCoinCloseUplight();
	WThrd::tr_sleep(1);

	gp_coin->dCoinOpenDownlight();
	WThrd::tr_sleep(1);
	gp_coin->dCoinCloseDownlight();
	WThrd::tr_sleep(1);

	gp_coin->dCoinOpenAlert();
	WThrd::tr_sleep(1);
	gp_coin->dCoinCloseAlert();
	WThrd::tr_sleep(1);
	

	while(1)
		WThrd::tr_sleep(3);
}


int test_coin()
{
	//m_iSeq=0;
	bool is=true;
	unsigned int pre;
    int count=0;
	BYTE pre1;
	BYTE SensorStatus[8];
	BYTE Test[2];
	unsigned int index;
	BYTE Major,Minor;
	BYTE Open1[2],Open2[2];
	BYTE Poll,Poll1[3];
	BYTE WriteId[5];
	BYTE ReadId/*,ReadId1[4]*/;
	BYTE Box_WriteId[13],BoxReadId[7];
	BYTE Program1[4],Program2[64];
	BYTE Change1[2],Change2[3];
	BYTE Clean1,Clean2[2];
	BYTE Add1,Add2[2];
	BYTE End;
	int i,j;
	unsigned long id=0;

	CCoin coinmodule;
	
	//≤‚ ‘
	BYTE bit;
	bool isOpen,isClose;
	int iResult;
	//
	
	while(is)
	{
		cout<< "------------------------------------------------------------------------------" <<endl
			<<"¥Úø™¥Æø⁄£∫						0"<<endl
			<<"πÿ±’¥Æø⁄£∫						1"<<endl
			<<"///////////////////////////////////////////////////////////////"<<endl
			<<"”≤±“ƒ£øÈ◊¥Ã¨≤È—Ø£∫   2"<<endl
			<<"”≤±“ƒ£øÈ≤‚ ‘√¸¡Ó£∫   3"<<endl
			<<"”≤±“ƒ£øÈ≥Ã–Ú∏¥Œª£∫   4"<<endl
			<<"”≤±“ƒ£øÈ≥Ã–Ú∞Ê±æ≤È—Ø£∫  5"<<endl
			<<"”≤±“ƒ£øÈ’“¡„√¸¡Ó£∫      7"<<endl
			<<"—≠ª∑’“¡„œ‰°¢◊®”√’“¡„œ‰’“¡„Ω· ¯£∫    71"<<endl
			<<"”≤±“ƒ£øÈ«Â±“√¸¡Ó£∫    8"<<endl
			<<"—≠ª∑’“¡„œ‰°¢◊®”√’“¡„œ‰«Â±“Ω· ¯√¸¡Ó£∫81"<<endl
			<<"”≤±“ƒ£øÈµÁ¥≈Ã˙ø™πÿ√¸¡Ó£∫    9"<<endl
			<<"”≤±“ ∂±∆˜¬÷—Ø£∫           10"<<endl
			<<"”≤±“ƒ£øÈ≤π±“œ‰º”±“√¸¡Ó£∫    11"<<endl
			<<"”≤±“ƒ£øÈ…Ë±∏”Î∆±œ‰µÁ◊”ID–¥√¸¡Ó£∫ 12"<<endl
			<<"”≤±“ƒ£øÈ…Ë±∏”Î∆±œ‰µÁ◊”ID∂¡√¸¡Ó£∫ 13"<<endl  
			<<"”≤±“ªÿ ’œ‰–¥√¸¡Ó£∫   14"<<endl
			<<"”≤±“ªÿ ’œ‰∂¡√¸¡Ó£∫   15"<<endl			
		    <<"///////////////////////////////////////////////////////////////"<<endl
			<<"”≤±“ƒ£øÈ≥Ã–Ú∏¸–¬√¸¡Ó£∫       16"<<endl
			<<"”≤±“ƒ£øÈ±‡≥Ãø™ º√¸¡Ó£∫       17"<<endl
			<<"”≤±“ƒ£øÈ∑¢ÀÕ±‡≥Ã ˝æ›√¸¡Ó£∫   18"<<endl
			<<"”≤±“ƒ£øÈ±‡≥ÃΩ· ¯√¸¡Ó£∫       19"<<endl
			<<"”≤±“ƒ£øÈ«–ªªµΩ”¶”√≥Ã–Ú√¸¡Ó£∫ 20"<<endl
			<<"///////////////////////////////////////////////////////////////"<<endl
			<<"‘§…Ë÷√µƒ∑µªÿ±®Œƒ£∫ 21"<<endl
			<<"ÕÀ≥ˆ≥Ã–Ú£∫         22"<<endl
			<<"///////////////////////////////////////////////////////////////"<<endl
			<<"«Î—°‘Ò÷∏œÚµƒ≤Ÿ◊˜¥˙¬Î£∫";
	    cin>>dec>>i;
		switch(i)
		{
		case 0: 
				cout<< gp_conf->Get_coin_com_port() <<endl;
			    isOpen=coinmodule.Coin_CommOpen(); 
				if(isOpen==true)
				{
				  cout<<"¥Úø™¥Æø⁄≥…π¶£°"<<endl;
				}
				else 
				{
				cout<<"¥Úø™¥Æø⁄ ß∞‹£°"<<endl;
				}
				break;
		case 1: isClose=coinmodule.Coin_CommClose();
			    if(isClose==true)
				{
				  cout<<"πÿ±’¥Æø⁄≥…π¶£°"<<endl;
				}
				else 
				{
				cout<<"πÿ±’¥Æø⁄ ß∞‹£°"<<endl;
				}
				break;
		case 2: iResult=coinmodule.Coin_State(SensorStatus);
			    if(iResult==0)
				{
					//.........0
					bit=0x01;
					bit&=SensorStatus[0];
					if(bit==0x00)
					{   
						cout<<"”≤±“ƒ£øÈµΩŒª£°"<<endl;
					}
					else
					{
						cout<<"”≤±“ƒ£øÈŒ¥µΩŒª£°"<<endl;
					};
					bit=0x02;
					bit&=SensorStatus[0];
					if(bit==0x00)
					{   
						cout<<"÷Ω±“’“¡„∆˜µΩŒª£°"<<endl;
					}
					else
					{
						cout<<"÷Ω±“’“¡„∆˜Œ¥µΩŒª£°"<<endl;
					};
					/*bit=0x04;
					bit&=SensorStatus[0];
					if(bit==0x00)
					{   
						cout<<"Õ∂±“ø⁄◊¥Ã¨πÿ±’£°"<<endl;
					}
					else
					{
						cout<<"Õ∂±“ø⁄◊¥Ã¨¥Úø™£°"<<endl;
					};*/
					bit=0x08;
					bit&=SensorStatus[0];
					if(bit==0x00)
					{   
						cout<<"—≠ª∑’“¡„∆˜µΩŒª£°"<<endl;
					}
					else
					{
						cout<<"—≠ª∑’“¡„∆˜Œ¥µΩŒª£°"<<endl;
					};
					bit=0x10;
					bit&=SensorStatus[0];
					if(bit==0x00)
					{   
						cout<<"UPS∂œµÁ–≈∫≈µΩŒª£°"<<endl;
					}
					else
					{
						cout<<"UPS∂œµÁ–≈∫≈Œ¥µΩŒª£°"<<endl;
					};
					bit=0x20;
					bit&=SensorStatus[0];
					if(bit==0x00)
					{   
						cout<<"«Â±“∑≠∞Ê–˝◊™µÁ¥≈Ã˙ÕÀ±“Œª÷√µΩŒª£°"<<endl;
					}
					else
					{
						cout<<"«Â±“∑≠∞Ê–˝◊™µÁ¥≈Ã˙ÕÀ±“Œª÷√Œ¥µΩŒª£°"<<endl;
					};
					bit=0x40;
					bit&=SensorStatus[0];
					if(bit==0x00)
					{   
					    cout<<"5Ω«≤π±“œ‰µΩŒª£°"<<endl;
					}
					else
					{
						cout<<"5Ω«≤π±“œ‰Œ¥µΩŒª£°"<<endl;
					};
					bit=0x80;
					bit&=SensorStatus[0];
					if(bit==0x00)
					{   
					cout<<"1‘™≤π±“œ‰µΩŒª£°"<<endl;
					}
					else
					{
					cout<<"1‘™≤π±“œ‰Œ¥µΩŒª£°"<<endl;
					};

					//...............1
					bit=0x01;
					bit&=SensorStatus[1];
					if(bit==0x00)
					{   
						cout<<"√≈µΩŒª£°"<<endl;
					}
					else
					{
						cout<<"√≈Œ¥µΩŒª£°"<<endl;
					};
					bit=0x02;
					bit&=SensorStatus[1];
					if(bit==0x00)
					{   
						cout<<"√≈À¯µΩŒª£°"<<endl;
					}
					else
					{
						cout<<"√≈À¯Œ¥µΩŒª£°"<<endl;
					};
					bit=0x04;
					bit&=SensorStatus[1];
					if(bit==0x00)
					{   
						cout<<"‘›¥Ê—≠ª∑’¢√≈πÿ±’£°"<<endl;
					}
					else
					{
						cout<<"‘›¥Ê—≠ª∑’¢√≈¥Úø™£°"<<endl;
					};
					bit=0x08;
					bit&=SensorStatus[1];
					if(bit==0x00)
					{   
						cout<<"‘›¥ÊÕÀ±“’¢√≈πÿ±’£°"<<endl;
					}
					else
					{
						cout<<"‘›¥ÊÕÀ±“’¢√≈¥Úø™£°"<<endl;
					};
					bit=0x10;
					bit&=SensorStatus[1];
					if(bit==0x00)
					{   
						cout<<"µ„±“œ‰À¯…œ£°"<<endl;
					}
					else
					{
						cout<<"µ„±“œ‰Œ¥À¯…œ£°"<<endl;
					};
					bit=0x20;
					bit&=SensorStatus[1];
					if(bit==0x00)
					{   
						cout<<"∑¢ø®ƒ£øÈµΩŒªµΩŒª£°"<<endl;
					}
					else
					{
						cout<<"∑¢ø®ƒ£øÈµΩŒªŒ¥µΩŒª£°"<<endl;
					};
					bit=0x40;
					bit&=SensorStatus[1];
					if(bit==0x00)
					{   
					   cout<<"±®æØ¿Æ∞»πÿ£°"<<endl;
					}
					else
					{
						cout<<"±®æØ¿Æ∞»ø™£°"<<endl;
					};
					bit=0x80;
					bit&=SensorStatus[1];
					if(bit==0x00)
					{   
					cout<<"»°∆±ø⁄’’√˜πÿ£°"<<endl;
					}
					else
					{
					cout<<"»°∆±ø⁄’’√˜ø™£°"<<endl;
					};
					//................2
					bit=0x04;
					bit&=SensorStatus[2];
					if(bit==0x00)
					{   
						cout<<"Õ∂±“ø⁄◊¥Ã¨πÿ±’£°"<<endl;
					}
					else
					{
						cout<<"Õ∂±“ø⁄◊¥Ã¨¥Úø™£°"<<endl;
					};
					bit=0x02;
					bit&=SensorStatus[2];
					if(bit==0x00)
					{   
						cout<<"Õ∂±“»Îø⁄π‚∏–’⁄µ≤£°"<<endl;
					}
					else
					{
						cout<<"Õ∂±“»Îø⁄π‚∏–√ª’⁄µ≤£°"<<endl;
					};
					bit=0x01;
					bit&=SensorStatus[2];
					if(bit==0x00)
					{   
						cout<<"Õ∂±“∑œ±“≥ˆø⁄π‚∏–’⁄µ≤£°"<<endl;
					}
					else
					{
						cout<<"Õ∂±“∑œ±“≥ˆø⁄π‚∏–√ª’⁄µ≤£°"<<endl;
					};
					//...........3
					bit=0x01;
					bit&=SensorStatus[3];
					if(bit==0x00)
					{   
						cout<<"”≤±“ªÿ ’œ‰±“Œª–≈∫≈3µΩŒª£°"<<endl;
					}
					else
					{
						cout<<"”≤±“ªÿ ’œ‰±“Œª–≈∫≈3Œ¥µΩŒª£°"<<endl;
					};
					bit=0x02;
					bit&=SensorStatus[3];
					if(bit==0x00)
					{   
						cout<<"”≤±“ªÿ ’œ‰±“Œª–≈∫≈2µΩŒª£°"<<endl;
					}
					else
					{
						cout<<"”≤±“ªÿ ’œ‰±“Œª–≈∫≈2Œ¥µΩŒª£°"<<endl;
					};
					bit=0x04;
					bit&=SensorStatus[3];
					if(bit==0x00)
					{   
						cout<<"”≤±“ªÿ ’œ‰±“Œª–≈∫≈1µΩŒª£°"<<endl;
					}
					else
					{
						cout<<"”≤±“ªÿ ’œ‰±“Œª–≈∫≈1Œ¥µΩŒª£°"<<endl;
					};
					bit=0x08;
					bit&=SensorStatus[3];
					if(bit==0x00)
					{   
						cout<<"”≤±“ªÿ ’œ‰µΩŒªµΩŒª£°"<<endl;
					}
					else
					{
						cout<<"”≤±“ªÿ ’œ‰µΩŒªŒ¥µΩŒª£°"<<endl;
					};
					bit=0x10;
					bit&=SensorStatus[3];
					if(bit==0x00)
					{   
					   cout<<"”≤±“ªÿ ’œ‰’˝≥££°"<<endl;
					}
					else
					{
						cout<<"”≤±“ªÿ ’œ‰∂¬£°"<<endl;
					};
					bit=0x20;
					bit&=SensorStatus[3];
					if(bit==0x00)
					{   
					cout<<"”≤±“ªÿ ’œ‰’˝≥££°"<<endl;
					}
					else
					{
					cout<<"”≤±“ªÿ ’œ‰¬˙£°"<<endl;
					};
					//....................4 1‘™—≠ª∑’“¡„œ‰◊¥Ã¨
					bit=0x04;
					bit&=SensorStatus[4];
					if(bit==0x00)
					{   
						cout<<"’“¡„∆˜µÕ±“Œª’⁄µ≤£°"<<endl;
					}
					else
					{
						cout<<"’“¡„∆˜µÕ±“ŒªŒ¥’⁄µ≤£®ø’£©£°"<<endl;
					};
					bit=0x08;
					bit&=SensorStatus[4];
					if(bit==0x00)
					{   
						cout<<"’“¡„∆˜∏ﬂ±“Œª’⁄µ≤£®¬˙£©£°"<<endl;
					}
					else
					{
						cout<<"’“¡„∆˜∏ﬂ±“ŒªŒ¥’⁄µ≤£°"<<endl;
					};
					bit=0x10;
					bit&=SensorStatus[4];
					if(bit==0x00)
					{   
						cout<<"À´œÚµÁ¥≈Ã˙’˝≥££°"<<endl;
					}
					else
					{
						cout<<"À´œÚµÁ¥≈Ã˙π ’œ£°"<<endl;
					};
					bit=0x20;
					bit&=SensorStatus[4];
					if(bit==0x00)
					{   
						cout<<"’“¡„œ‰À¯µΩŒª£°"<<endl;
					}
					else
					{
						cout<<"’“¡„œ‰À¯Œ¥µΩŒª£°"<<endl;
					};
					//..................5 5Ω«—≠ª∑’“¡„œ‰◊¥Ã¨
					bit=0x04;
					bit&=SensorStatus[5];
					if(bit==0x00)
					{   
						cout<<"’“¡„∆˜µÕ±“Œª’⁄µ≤£°"<<endl;
					}
					else
					{
						cout<<"’“¡„∆˜µÕ±“ŒªŒ¥’⁄µ≤£®ø’£©£°"<<endl;
					};
					bit=0x08;
					bit&=SensorStatus[5];
					if(bit==0x00)
					{   
						cout<<"’“¡„∆˜∏ﬂ±“Œª’⁄µ≤£®¬˙£©£°"<<endl;
					}
					else
					{
						cout<<"’“¡„∆˜∏ﬂ±“ŒªŒ¥’⁄µ≤£°"<<endl;
					};
					bit=0x10;
					bit&=SensorStatus[5];
					if(bit==0x00)
					{   
						cout<<"À´œÚµÁ¥≈Ã˙’˝≥££°"<<endl;
					}
					else
					{
						cout<<"À´œÚµÁ¥≈Ã˙π ’œ£°"<<endl;
					};
					//..............6 1‘™◊®”√’“¡„œ‰◊¥Ã¨
					bit=0x04;
					bit&=SensorStatus[6];
					if(bit==0x00)
					{   
						cout<<"’“¡„∆˜µÕ±“Œª’⁄µ≤£°"<<endl;
					}
					else
					{
						cout<<"’“¡„∆˜µÕ±“ŒªŒ¥’⁄µ≤£®ø’£©£°"<<endl;
					};
					bit=0x08;
					bit&=SensorStatus[6];
					if(bit==0x00)
					{   
						cout<<"’“¡„∆˜∏ﬂ±“Œª’⁄µ≤£®¬˙£©£°"<<endl;
					}
					else
					{
						cout<<"’“¡„∆˜∏ﬂ±“ŒªŒ¥’⁄µ≤£°"<<endl;
					};
					bit=0x10;
					bit&=SensorStatus[6];
					if(bit==0x00)
					{   
						cout<<"À´œÚµÁ¥≈Ã˙’˝≥££°"<<endl;
					}
					else
					{
						cout<<"À´œÚµÁ¥≈Ã˙π ’œ£°"<<endl;
					};
					bit=0x20;
					bit&=SensorStatus[6];
					if(bit==0x00)
					{   
						cout<<"’“¡„œ‰À¯µΩŒª£°"<<endl;
					}
					else
					{
						cout<<"’“¡„œ‰À¯Œ¥µΩŒª£°"<<endl;
					};
					//..............7 5Ω«◊®”√’“¡„œ‰◊¥Ã¨
					bit=0x04;
					bit&=SensorStatus[7];
					if(bit==0x00)
					{   
						cout<<"’“¡„∆˜µÕ±“Œª’⁄µ≤£°"<<endl;
					}
					else
					{
						cout<<"’“¡„∆˜µÕ±“ŒªŒ¥’⁄µ≤£®ø’£©£°"<<endl;
					};
					bit=0x08;
					bit&=SensorStatus[7];
					if(bit==0x00)
					{   
						cout<<"’“¡„∆˜∏ﬂ±“Œª’⁄µ≤£®¬˙£©£°"<<endl;
					}
					else
					{
						cout<<"’“¡„∆˜∏ﬂ±“ŒªŒ¥’⁄µ≤£°"<<endl;
					};
					bit=0x10;
					bit&=SensorStatus[7];
					if(bit==0x00)
					{   
						cout<<"À´œÚµÁ¥≈Ã˙’˝≥££°"<<endl;
					}
					else
					{
						cout<<"À´œÚµÁ¥≈Ã˙π ’œ£°"<<endl;
					};


					cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==-1)
				{
					cout<<"√¸¡Ó÷¥––≥¨ ±£°"<<endl;
                }
				else if(iResult==80)
				{
					cout<<"…Ë±∏◊¥Ã¨√¶£°"<<endl;
                }
				else if(iResult==98)
				{
					cout<<"√¸¡Ó÷¥–– ß∞‹£°"<<endl;
                }
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
                }
        else if(iResult==-2)
				{
					cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
				}
				else if(iResult==-3)
				{
					cout<<"√¸¡Ó∑¢ÀÕ ß∞‹£°"<<endl;
				}
				else if(iResult==-4)
				{
					cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈¥ÌŒÛ£°"<<endl;
				}
				break;
		case 3:	cout<<"0x11£∫1‘™º”±“œ‰µÁ¥≈Ã˙∂Ø◊˜"<<endl
                    <<"0x12£∫5Ω«º”±“œ‰µÁ¥≈Ã˙∂Ø◊˜"<<endl
					<<"0x13£∫1‘™—≠ª∑’“¡„œ‰µÁ¥≈Ã˙∂Ø◊˜"<<endl
					<<"0x14£∫5Ω«—≠ª∑’“¡„œ‰µÁ¥≈Ã˙∂Ø◊˜"<<endl
					<<"0x15£∫1‘™≤π±“œ‰µÁ¥≈Ã˙∂Ø◊˜"<<endl
					<<"0x16£∫5Ω«≤π±“œ‰µÁ¥≈Ã˙∂Ø◊˜"<<endl
					<<"0x17£∫1‘™º”±“œ‰µÁª˙∂Ø◊˜(µÁª˙œ»’˝◊™»ª∑¥◊™)"<<endl
					<<"0x18£∫5Ω«º”±“œ‰µÁª˙∂Ø◊˜(µÁª˙œ»’˝◊™»ª∑¥◊™)"<<endl
					<<"0x19£∫1‘™—≠ª∑’“¡„œ‰µÁª˙∂Ø◊˜(µÁª˙œ»’˝◊™»ª∑¥◊™)"<<endl
					<<"0x1A£∫5Ω«—≠ª∑’“¡„œ‰µÁª˙∂Ø◊˜(µÁª˙œ»’˝◊™»ª∑¥◊™)"<<endl
					<<"0x1B£∫1‘™≤π±“œ‰µÁª˙∂Ø◊˜(µÁª˙œ»’˝◊™»ª∑¥◊™)"<<endl
					<<"0x1C£∫5Ω«≤π±“œ‰µÁª˙∂Ø◊˜(µÁª˙œ»’˝◊™»ª∑¥◊™)"<<endl
					<<"0x00£∫Õ£÷πÀ˘”–∂Ø◊˜"<<endl;
			        cout<<"«Î—°‘Ò≤‚ ‘µƒµÁª˙≤Ÿ◊˜£∫";
					cin>>hex>>index;
					Test[0]=(BYTE)index;
					Test[1]=0x11;
			        iResult=coinmodule.Coin_Test(Test);	
					if(iResult==0)
					{
						cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
					}
					else if(iResult==-1)
					{
						cout<<"√¸¡Ó÷¥––≥¨ ±£°"<<endl;
					}
					else if(iResult==80)
					{
						cout<<"…Ë±∏◊¥Ã¨√¶£°"<<endl;
					}
					else if(iResult==98)
					{
						cout<<"√¸¡Ó÷¥–– ß∞‹£°"<<endl;
					}
					else if(iResult==99)
					{
						cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
					}
					else if(iResult==-2)
				  {
				  	cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
				  }
				  else if(iResult==-3)
				  {
					  cout<<"√¸¡Ó∑¢ÀÕ ß∞‹£°"<<endl;
				  }
				  else if(iResult==-4)
				  {
					  cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈¥ÌŒÛ£°"<<endl;
				  }
				break;
	    case 4: iResult=coinmodule.Coin_Reset();
			    if(iResult==0)
				{  
					cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==-1)
				{
					cout<<"√¸¡Ó÷¥––≥¨ ±£°"<<endl;
				}
				else if(iResult==80)
				{
					cout<<"…Ë±∏◊¥Ã¨√¶£°"<<endl;
				}
				else if(iResult==98)
				{
					cout<<"√¸¡Ó÷¥–– ß∞‹£°"<<endl;
				}
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
				}
				else if(iResult==-2)
				{
				  	cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
				}
				else if(iResult==-3)
				 {
					  cout<<"√¸¡Ó∑¢ÀÕ ß∞‹£°"<<endl;
				  }
				  else if(iResult==-4)
				  {
					  cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈¥ÌŒÛ£°"<<endl;
				  }
				break;
		case 5: iResult=coinmodule.Coin_GetVersion(Major,Minor);
			   if(iResult==0)
				{   
				    cout<<"÷˜∞Ê±æ∫≈:"<<hex<<(int)Major<<"  ∏±∞Ê±æ∫≈£∫"<<hex<<(int)Minor<<endl;
					cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==-1)
				{
					cout<<"√¸¡Ó÷¥––≥¨ ±£°"<<endl;
                }
				else if(iResult==80)
				{
					cout<<"…Ë±∏◊¥Ã¨√¶£°"<<endl;
                }
				else if(iResult==98)
				{
					cout<<"√¸¡Ó÷¥–– ß∞‹£°"<<endl;
                }
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
				}
				else if(iResult==-2)
				  {
				  	cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
				  }
				  else if(iResult==-3)
				  {
					  cout<<"√¸¡Ó∑¢ÀÕ ß∞‹£°"<<endl;
				  }
				  else if(iResult==-4)
				  {
					  cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈¥ÌŒÛ£°"<<endl;
				  }
				break;
		case 71: cout<<"0x01£∫1‘™—≠ª∑’“¡„£ª0x02£∫5Ω«—≠ª∑’“¡„£ª0x04£∫1‘™◊®”√’“¡„£ª0x08£∫5Ω«◊®”√’“¡„"<<endl;
			     cout<<"«Î—°‘Ò’“¡„≤Ÿ◊˜£∫";
			     cin>>hex>>index;
			    End=(BYTE)index;
				iResult=coinmodule.Coin_End_Change(End);
				if(iResult==0)
				{   
				    cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
				}
				else if(iResult==-2)
				  {
				  	cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
				  }
				  else if(iResult==-3)
				  {
					  cout<<"√¸¡Ó∑¢ÀÕ ß∞‹£°"<<endl;
				  }
				  else if(iResult==-4)
				  {
					  cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈¥ÌŒÛ£°"<<endl;
				  };
				break;
		case 7: cout<<"0x01£∫1‘™—≠ª∑’“¡„£ª0x02£∫5Ω«—≠ª∑’“¡„£ª0x04£∫1‘™◊®”√’“¡„£ª0x08£∫5Ω«◊®”√’“¡„"<<endl;
			    cout<<"«Î—°‘Ò’“¡„≤Ÿ◊˜£∫";
			    cin>>hex>>index;
			    Change1[0]=(BYTE)index;
			   /* cout<<"0xAB£∫A√¸¡Ó 0xBB£∫B√¸¡Ó";
				cin>>hex>>index;
			    Change1[1]=(BYTE)index;*/
				cout<<"«Î∞¥ Æ¡˘Ω¯÷∆ ‰»Î’“¡„ ˝£®1~48£©";
				cin>>hex>>index;
			    Change1[1]=(BYTE)index;
			    iResult=coinmodule.Coin_Change(Change1,Change2);
				 if(iResult==0)
				{   
					//...............0
				    switch(Change2[0])
					{
					case 0x01:cout<<"1‘™—≠ª∑’“¡„"<<endl;
						     break;
					case 0x02:cout<<"5Ω«—≠ª∑’“¡„"<<endl;
					break;
					case 0x04:cout<<"1‘™◊®”√’“¡„"<<endl;
					break;
					case 0x08:cout<<"5Ω«◊®”√’“¡„"<<endl;
					break;					
					};
					//................1
					cout<<"’“¡„ ˝£∫"<<(int)Change2[1]<<endl;
					//................2
					bit=0x01;
					bit&= Change2[2];
					if(bit==0x00)
					{   
						cout<<"’“¡„œ‰√ªø’£°"<<endl;
					}
					else
					{
						cout<<"—≠ª∑’“¡„œ‰ªÚ◊®”√’“¡„œ‰ø’£°"<<endl;
					};
					bit=0x02;
					bit&=Change2[2];
					if(bit==0x00)
					{   
						cout<<"√ª”–π ’œ£°"<<endl;
					}
					else
					{
						cout<<"£®’“¡„∂∑ø®±“)ªÚ(’“¡„∂∑≥ˆ±“º∆ ˝æ›¥´∏–∆˜Œ¥≤Â∫√∫Õªµ)ªÚ(’“¡„∂∑≥ˆ±“Õ®µ¿ø®±“) £°"<<endl;
					};
                    bit=0x04;
					bit&=Change2[2];
					if(bit==0x00)
					{   
						cout<<"’“¡„∆˜µÕ±“Œª’⁄µ≤£°"<<endl;
					}
					else
					{
						cout<<"’“¡„∆˜µÕ±“ŒªŒ¥’⁄µ≤£®ø’£©£°"<<endl;
					};
					bit=0x08;
					bit&=Change2[2];
					if(bit==0x00)
					{   
						cout<<"’“¡„∆˜∏ﬂ±“Œª’⁄µ≤£®¬˙£©£°"<<endl;
					}
					else
					{
						cout<<"’“¡„∆˜∏ﬂ±“ŒªŒ¥’⁄µ≤£°"<<endl;
					};
					bit=0x10;
					bit&=Change2[2];
					if(bit==0x00)
					{   
						cout<<"À´œÚµÁ¥≈Ã˙’˝≥££°"<<endl;
					}
					else
					{
						cout<<"À´œÚµÁ¥≈Ã˙π ’œ£°"<<endl;
					};
					bit=0x20;
					bit&=Change2[2];
					if(bit==0x00)
					{   
						cout<<"À˘—°‘Òµƒ’“¡„œ‰ƒ£øÈŒªÀ¯µΩŒª£°"<<endl;
					}
					else
					{
						cout<<"À˘—°‘Òµƒ’“¡„œ‰ƒ£øÈŒªÀ¯Œ¥µΩŒª£°"<<endl;
					};
					cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==-1)
				{
					cout<<"√¸¡Ó÷¥––≥¨ ±£°"<<endl;
                }
				else if(iResult==80)
				{
					cout<<"…Ë±∏◊¥Ã¨√¶£°"<<endl;
                }
				else if(iResult==98)
				{
					cout<<"√¸¡Ó÷¥–– ß∞‹£°"<<endl;
                }
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
				}
				else if(iResult==-2)
				  {
				  	cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
				  }
				  else if(iResult==-3)
				  {
					  cout<<"√¸¡Ó∑¢ÀÕ ß∞‹£°"<<endl;
				  }
				  else if(iResult==-4)
				  {
					  cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈¥ÌŒÛ£°"<<endl;
				  }
				break;
		case 81: cout<<"0x01£∫1‘™—≠ª∑’“¡„£ª0x02£∫5Ω«—≠ª∑’“¡„£ª0x04£∫1‘™◊®”√’“¡„£ª0x08£∫5Ω«◊®”√’“¡„"<<endl;
			     cout<<"«Î—°‘Ò«Â±“≤Ÿ◊˜£∫";
			     cin>>hex>>index;
			    End=(BYTE)index;
				iResult=coinmodule.Coin_End_Clean(End);
				if(iResult==0)
				{   
				    cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
				}
				else if(iResult==-2)
				  {
				  	cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
				  }
				  else if(iResult==-3)
				  {
					  cout<<"√¸¡Ó∑¢ÀÕ ß∞‹£°"<<endl;
				  }
				  else if(iResult==-4)
				  {
					  cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈¥ÌŒÛ£°"<<endl;
				  }
			    break;
		case 8: cout<<"0x01£∫1‘™—≠ª∑’“¡„£ª0x02£∫5Ω«—≠ª∑’“¡„£ª0x04£∫1‘™◊®”√’“¡„£ª0x08£∫5Ω«◊®”√’“¡„"<<endl;
			    cout<<"«Î—°«Â±“≤Ÿ◊˜£∫";
			    cin>>hex>>index;
			    Clean1=(BYTE)index;
			    iResult=coinmodule.Coin_Clean(Clean1,Clean2,count);
				if(iResult==0)
				{
					//...............0
				    switch(Clean2[0])
					{
					case 0x01:cout<<"1‘™—≠ª∑’“¡„"<<endl;
						     break;
					case 0x02:cout<<"5Ω«—≠ª∑’“¡„"<<endl;
					         break;
					case 0x04:cout<<"1‘™◊®”√’“¡„"<<endl;
					         break;
					case 0x08:cout<<"5Ω«◊®”√’“¡„"<<endl;
					         break;					
					};
					////................1
					//cout<<"«Â±“ ˝æ›∏ﬂŒª£∫"<<(int)Clean2[1]<<endl;
					////................2
					//cout<<"«Â±“ ˝æ›µÕŒª£∫"<<(int)Clean2[2]<<endl;
					//................1
					bit=0x01;
					bit&= Clean2[1];
					if(bit==0x00)
					{   
						cout<<"’“¡„œ‰√ªø’£°"<<endl;
					}
					else
					{
						cout<<"’“¡„œ‰ªÚ≤π±“œ‰ø’£°"<<endl;
					};
					bit=0x02;
					bit&= Clean2[1];
					if(bit==0x00)
					{   
						cout<<"√ª”–π ’œ£°"<<endl;
					}
					else
					{
						cout<<"£®(’“¡„∂∑ø®±“)ªÚ(’“¡„∂∑≥ˆ±“º∆ ˝æ›¥´∏–∆˜Œ¥≤Â∫√∫Õªµ)ªÚ(’“¡„∂∑≥ˆ±“Õ®µ¿ø®±“)£°"<<endl;
					};
                    bit=0x04;
					bit&= Clean2[1];
					if(bit==0x00)
					{   
						cout<<"’“¡„∆˜µÕ±“Œª’⁄µ≤£°"<<endl;
					}
					else
					{
						cout<<"’“¡„∆˜µÕ±“ŒªŒ¥’⁄µ≤£®ø’£©£°"<<endl;
					};
					bit=0x08;
					bit&= Clean2[1];
					if(bit==0x00)
					{   
						cout<<"’“¡„∆˜∏ﬂ±“Œª’⁄µ≤£®¬˙£©£°"<<endl;
					}
					else
					{
						cout<<"’“¡„∆˜∏ﬂ±“ŒªŒ¥’⁄µ≤£°"<<endl;
					};
					bit=0x10;
					bit&= Clean2[1];
					if(bit==0x00)
					{   
						cout<<"À´œÚµÁ¥≈Ã˙’˝≥££°"<<endl;
					}
					else
					{
						cout<<"À´œÚµÁ¥≈Ã˙π ’œ£°"<<endl;
					};
					bit=0x20;
					bit&= Clean2[1];
					if(bit==0x00)
					{   
						cout<<"—≠ª∑’“¡„œ‰ªÚ≤π≥‰’“¡„œ‰ƒ£øÈŒªÀ¯µΩŒª£°"<<endl;
					}
					else
					{
						cout<<"—≠ª∑’“¡„œ‰ªÚ≤π≥‰’“¡„œ‰ƒ£øÈŒªÀ¯Œ¥µΩŒª£°"<<endl;
					};
					cout<<"«Â±“ ˝æ› ˝ƒø£∫"<<count<<endl;
					cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==-1)
				{
					cout<<"√¸¡Ó÷¥––≥¨ ±£°"<<endl;
                }
				else if(iResult==80)
				{
					cout<<"…Ë±∏◊¥Ã¨√¶£°"<<endl;
                }
				else if(iResult==98)
				{
					cout<<"√¸¡Ó÷¥–– ß∞‹£°"<<endl;
                }
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
				}
				else if(iResult==-2)
				  {
				  	cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
				  }
				  else if(iResult==-3)
				  {
					  cout<<"√¸¡Ó∑¢ÀÕ ß∞‹£°"<<endl;
				  }
				  else if(iResult==-4)
				  {
					  cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈¥ÌŒÛ£°"<<endl;
				  }
				break;
		case 9: cout<<"µ⁄“ª∏ˆ ˝æ›µƒ√ø“ªŒªΩÈ…‹£∫"<<endl;
			    cout<<"Bit7-6:Œ¥ π”√"<<endl
					<<"Bit5:=1/0   1µÁ‘¥œ‰ø™πÿø™£®±£¡Ù£©"<<endl
					<<"Bit4:=1/0   ‘§¡Ù"<<endl
					<<"Bit3:=1/0   1ø®±“Ω‚≥˝¬Ì¥Ô∆Ù∂Ø£¨0Õ£"<<endl
					<<"Bit2:=1/0   1‘›¥Ê∑≠∞ÂΩ¯ªÿ ’ 0ÕÀ±“"<<endl
					<<"Bit1:=1/0   1‘›¥Ê∆˜ÕÀ±“’¢√≈ø™£¨0πÿ"<<endl
					<<"Bit0:=1/0   1‘›¥Ê—≠ª∑ªÿ ’’¢√≈ø™£¨0πÿ"<<endl;
			   cout<<"«Î ‰»Î“ª∏ˆ Æ¡˘Ω¯÷∆ ˝£∫";
			   cin>>hex>>index;
			   Open1[0]=(BYTE)index;
			   cout<<"µ⁄∂˛∏ˆ ˝æ›µƒ√ø“ªŒªΩÈ…‹£∫"<<endl;
			   cout<<"Bit7~bit6:Œ¥ π”√"<<endl
					<<"Bit5-4£∫11ø™≥ÀøÕœ‘ æ∆˜’’√˜£¨01πÿ≥ÀøÕœ‘ æ∆˜’’√˜£¨00≤ª∏ƒ±‰"<<endl
					<<"Bit3-2£∫11ø™»°∆±ø⁄’’√˜£¨01πÿ»°∆±ø⁄’’√˜£¨00≤ª∏ƒ±‰"<<endl
					<<"Bit1-0£∫11ø™±®æØ∆˜£¨01πÿ±®æØ∆˜£¨00≤ª∏ƒ±‰"<<endl;
			   cout<<"«Î ‰»Î“ª∏ˆ Æ¡˘Ω¯÷∆ ˝£∫";
			   cin>>hex>>index;
               Open1[1]=(BYTE)index;			    
			   iResult=coinmodule.Coin_OpenClose(Open1,Open2);
			   if(iResult==0)
			   {  
				   //...................0
				    bit=0x01;
					bit&= Open2[0];
					if(bit==0x00)
					{   
						cout<<"‘›¥Ê—≠ª∑’¢√≈πÿ£°"<<endl;
					}
					else
					{
						cout<<"‘›¥Ê—≠ª∑’¢√≈ø™£°"<<endl;
					};
					bit=0x02;
					bit&=Open2[0];
					if(bit==0x00)
					{   
						cout<<"‘›¥ÊÕÀ±“’¢√≈πÿ!"<<endl;
					}
					else
					{
						cout<<"‘›¥ÊÕÀ±“’¢√≈ø™£°"<<endl;
					};
                    bit=0x04;
					bit&=Open2[0];
					if(bit==0x00)
					{   
						cout<<"ÕÀ±“£°"<<endl;
					}
					else
					{
						cout<<"‘›¥Ê∑≠∞ÂΩ¯ªÿ ’£°"<<endl;
					};
					bit=0x08;
					bit&=Open2[0];
					if(bit==0x00)
					{   
						cout<<"ø®±“Ω‚≥˝¬Ì¥ÔŒ¥µΩŒª£°"<<endl;
					}
					else
					{
						cout<<"ø®±“Ω‚≥˝¬Ì¥ÔµΩŒª£°"<<endl;
					};
					bit=0x20;
					bit&=Open2[0];
					if(bit==0x00)
					{   
						cout<<"µÁ‘¥œ‰ø™πÿπÿ£°"<<endl;
					}
					else
					{
						cout<<"µÁ‘¥œ‰ø™πÿø™£°"<<endl;
					};
					bit=0x40;
					bit&=Open2[0];
					if(bit==0x00)
					{   
						cout<<"«Â±“’¢’˝≥££°"<<endl;
					}
					else
					{
						cout<<"«Â±“’¢“Ï≥££®π‚∏–»´¡¡ªÚ»´∞µ£©£°"<<endl;
					};
					//...................1
					 bit=0x01;
					bit&= Open2[1];
					if(bit==0x00)
					{   
						cout<<"±®æØ∆˜πÿ£°"<<endl;
					}
					else
					{
						cout<<"±®æØ∆˜ø™£°"<<endl;
					};
					bit=0x02;
					bit&=Open2[1];
					if(bit==0x00)
					{   
						cout<<"»°∆±ø⁄’’√˜πÿ£°"<<endl;
					}
					else
					{
						cout<<"»°∆±ø⁄’’√˜ø™£°"<<endl;
					};
                    bit=0x04;
					bit&=Open2[1];
					if(bit==0x00)
					{   
						cout<<"≥ÀøÕœ‘ æ∆˜’’√˜πÿ£°"<<endl;
					}
					else
					{
						cout<<"≥ÀøÕœ‘ æ∆˜’’√˜ø™£°"<<endl;
					};

			   	   cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==-1)
				{
					cout<<"√¸¡Ó÷¥––≥¨ ±£°"<<endl;
                }
				else if(iResult==80)
				{
					cout<<"…Ë±∏◊¥Ã¨√¶£°"<<endl;
                }
				else if(iResult==98)
				{
					cout<<"√¸¡Ó÷¥–– ß∞‹£°"<<endl;
                }
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
				}
				else if(iResult==-2)
				  {
				  	cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
				  }
				  else if(iResult==-3)
				  {
					  cout<<"√¸¡Ó∑¢ÀÕ ß∞‹£°"<<endl;
				  }
				  else if(iResult==-4)
				  {
					  cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈¥ÌŒÛ£°"<<endl;
				  }
				break;
		case 10:cout<<" ˝æ›µƒ√ø“ªŒªΩÈ…‹£∫"<<endl;
			   cout<<"Bit7-6:Œ¥ π”√"<<endl
					<<"Bit3: =1/0  1 Õ∂±“ø⁄’¢√≈¥Úø™£¨ 0’¢√≈πÿ±’"<<endl
					<<"Bit2:=1/0  1 «Â≥˝”≤±“º∆ ˝ºƒ¥Ê∆˜£¨0≤ª«Â≥˝"<<endl
					<<"Bit1:=1/0  1 Ω˚÷π5Ω«£¨ 0Ω” ‹5Ω«"<<endl
					<<"Bit0:=1/0  1 Ω˚÷π1‘™£¨ 0Ω” ‹1‘™"<<endl;					
			   cout<<"«Î ‰»Î“ª∏ˆ Æ¡˘Ω¯÷∆ ˝£∫";
			   cin>>hex>>index;
			   Poll=(BYTE)index;
			   iResult=coinmodule.Coin_Poll(Poll,Poll1);
			   if(iResult==0)
			   {
				   //...........0
				   cout<<"Ω” ‹µƒ1‘™”≤±“ ˝£∫"<<(int)Poll1[0]<<endl;
				   //...........1
				   cout<<"Ω” ‹µƒ5Ω«”≤±“ ˝£∫"<<(int)Poll1[1]<<endl;
				   //...........2
				   bit=0x01;
				   bit&=Poll1[2];
				   if(bit==0x00)
					{   
						cout<<"“—Ω” ‹1‘™£°"<<endl;
					}
					else
					{
						cout<<"“—Ω˚÷π1‘™£°"<<endl;
					};
				   bit=0x02;
				   bit&=Poll1[2];
				   if(bit==0x00)
					{   
						cout<<"“—Ω” ‹5Ω«£°"<<endl;
					}
					else
					{
						cout<<"“—Ω˚÷π5Ω«£°"<<endl;
					};
				   bit=0x04;
				   bit&=Poll1[2];
				   if(bit==0x00)
					{   
						cout<<"Õ∂±“ø⁄’¢√≈Œ¥¥Úø™£°"<<endl;
					}
					else
					{
						cout<<"Õ∂±“ø⁄’¢√≈“—¥Úø™£°"<<endl;
					};
				   bit=0x08;
				   bit&=Poll1[2];
				   if(bit==0x00)
					{   
						cout<<"”≤±“ ∂±∆˜≤ª¥Ê‘⁄£°"<<endl;
					}
					else
					{
						cout<<"”≤±“ ∂±∆˜¥Ê‘⁄£°"<<endl;
					};
				   bit=0x10;
				   bit&=Poll1[2];
				   if(bit==0x00)
					{   
						cout<<"”≤±“Ω¯ø⁄Õ®µ¿’˝≥££°"<<endl;
					}
					else
					{
						cout<<"”≤±“Ω¯ø⁄Õ®µ¿π ’œ£°"<<endl;
					};
				    bit=0x20;
				   bit&=Poll1[2];
				   if(bit==0x00)
					{   
						cout<<"”≤±“ªÿ ’œ‰Õ®µ¿’˝≥££°"<<endl;
					}
					else
					{
						cout<<"”≤±“ªÿ ’œ‰Õ®µ¿¬˙/∂¬£°"<<endl;
					};

			      cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==-1)
				{
					cout<<"√¸¡Ó÷¥––≥¨ ±£°"<<endl;
                }
				else if(iResult==80)
				{
					cout<<"…Ë±∏◊¥Ã¨√¶£°"<<endl;
                }
				else if(iResult==98)
				{
					cout<<"√¸¡Ó÷¥–– ß∞‹£°"<<endl;
                }
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
				}
				else if(iResult==-2)
				  {
				  	cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
				  }
				  else if(iResult==-3)
				  {
					  cout<<"√¸¡Ó∑¢ÀÕ ß∞‹£°"<<endl;
				  }
				  else if(iResult==-4)
				  {
					  cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈¥ÌŒÛ£°"<<endl;
				  }
				break;
		case 11:cout<<"0x01£∫1‘™≤π±“œ‰£ª  0x02£∫5Ω«≤π±“œ‰"<<endl;
			    cout<<"«Î—°‘Ò≤π±“œ‰£∫";
			    cin>>hex>>index;
			    Add1=(BYTE)index;			    
			    iResult=coinmodule.Coin_Add(Add1,Add2,count);
				if(iResult==0)
				{  
					//..................0
					if(Add2[0]==0x01)
					{
						cout<<"1‘™≤π±“œ‰"<<endl;
					}
					else
					{
						cout<<"5Ω«≤π±“œ‰"<<endl;
					};
					////...............1
					//cout<<"≤π±“ ˝æ›∏ﬂŒª "<<(int)Add2[1]<<endl;
					////..............2
				 //   cout<<"≤π±“ ˝æ›µÕŒª "<<(int)Add2[2]<<endl;
					//...................1
					bit=0x01;
					bit&= Add2[1];
					if(bit==0x00)
					{   
						cout<<"’“¡„œ‰√ªø’£°"<<endl;
					}
					else
					{
						cout<<"’“¡„œ‰ªÚ≤π±“œ‰ø’£°"<<endl;
					};
					bit=0x02;
					bit&=Add2[1];
					if(bit==0x00)
					{   
						cout<<"√ª”–π ’œ£°"<<endl;
					}
					else
					{
						cout<<"£®(’“¡„∂∑ø®±“)ªÚ(’“¡„∂∑≥ˆ±“º∆ ˝æ›¥´∏–∆˜Œ¥≤Â∫√∫Õªµ)ªÚ(’“¡„∂∑≥ˆ±“Õ®µ¿ø®±“)£°"<<endl;
					};
                    bit=0x04;
					bit&=Add2[1];
					if(bit==0x00)
					{   
						cout<<"’“¡„∆˜µÕ±“Œª’⁄µ≤£°"<<endl;
					}
					else
					{
						cout<<"’“¡„∆˜µÕ±“ŒªŒ¥’⁄µ≤£®ø’£©£°"<<endl;
					};
					bit=0x08;
					bit&=Add2[1];
					if(bit==0x00)
					{   
						cout<<"’“¡„∆˜∏ﬂ±“Œª’⁄µ≤£®¬˙£©£°"<<endl;
					}
					else
					{
						cout<<"’“¡„∆˜∏ﬂ±“ŒªŒ¥’⁄µ≤£°"<<endl;
					};
					bit=0x10;
					bit&=Add2[1];
					if(bit==0x00)
					{   
						cout<<"À´œÚµÁ¥≈Ã˙’˝≥££°"<<endl;
					}
					else
					{
						cout<<"À´œÚµÁ¥≈Ã˙π ’œ£°"<<endl;
					};
					bit=0x20;
					bit&=Add2[1];
					if(bit==0x00)
					{   
						cout<<"≤π≥‰’“¡„œ‰ƒ£øÈŒªÀ¯µΩŒª£°"<<endl;
					}
					else
					{
						cout<<"≤π≥‰’“¡„œ‰ƒ£øÈŒªÀ¯Œ¥µΩŒª£°"<<endl;
					};
					
					
				  cout<<"≤π±“ ˝æ› ˝¡ø£∫ "<<count<<endl;
			      cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==-1)
				{
					cout<<"√¸¡Ó÷¥––≥¨ ±£°"<<endl;
                }
				else if(iResult==80)
				{
					cout<<"…Ë±∏◊¥Ã¨√¶£°"<<endl;
                }
				else if(iResult==98)
				{
					cout<<"√¸¡Ó÷¥–– ß∞‹£°"<<endl;
                }
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
				}
				else if(iResult==-2)
				  {
				  	cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
				  }
				  else if(iResult==-3)
				  {
					  cout<<"√¸¡Ó∑¢ÀÕ ß∞‹£°"<<endl;
				  }
				  else if(iResult==-4)
				  {
					  cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈¥ÌŒÛ£°"<<endl;
				  }
				break;
		case 12: cout<<"0x01£∫1‘™≤π±“œ‰µÁ◊”ID£ª£®≤π±“œ‰µÁ◊”ID£©"<<endl
                    <<"0x02£∫5Ω«≤π±“œ‰µÁ◊”ID £®‘§¡Ù£©"<<endl
					<<"0x04£∫”≤±“ƒ£øÈ…Ë±∏±‡∫≈£ª"<<endl;
				cout<<"«Î–¥»Î…Ë±∏≤Ÿ◊˜±‡∫≈£∫";
				cin>>hex>>index;
				WriteId[0]=(BYTE)index;
				for(int i=1;i<5;i++)
				{
				cout<<"«Î ‰»Îƒ£øÈ±‡∫≈£®∏ﬂŒª‘⁄«∞£©£∫";
				cin>>hex>>index;
				WriteId[i]=(BYTE)index;
				}			   
			    iResult=coinmodule.Coin_WriteID(WriteId);
				if(iResult==0)
				{
					cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==-1)
				{
					cout<<"√¸¡Ó÷¥––≥¨ ±£°"<<endl;
                }
				else if(iResult==80)
				{
					cout<<"…Ë±∏◊¥Ã¨√¶£°"<<endl;
                }
				else if(iResult==98)
				{
					cout<<"√¸¡Ó÷¥–– ß∞‹£°"<<endl;
                }
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
				}
				else if(iResult==-2)
				  {
				  	cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
				  }
				  else if(iResult==-3)
				  {
					  cout<<"√¸¡Ó∑¢ÀÕ ß∞‹£°"<<endl;
				  }
				  else if(iResult==-4)
				  {
					  cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈¥ÌŒÛ£°"<<endl;
				  }
				break;
		case 13: cout<<"0x01£∫1‘™≤π±“œ‰µÁ◊”ID£ª£®≤π±“œ‰µÁ◊”ID£©"<<endl
                    <<"0x02£∫5Ω«≤π±“œ‰µÁ◊”ID £®‘§¡Ù£©"<<endl
					<<"0x04£∫”≤±“ƒ£øÈ…Ë±∏±‡∫≈£ª"<<endl;
				cout<<"«Î–¥»Î…Ë±∏≤Ÿ◊˜±‡∫≈£∫";
				cin>>hex>>index;
				ReadId=(BYTE)index;  
     			iResult=coinmodule.Coin_ReadID(ReadId,id);
				if(iResult==0)
				{
					//cout<<"ƒ£øÈ±‡∫≈£®∏ﬂŒª‘⁄«∞£© «£∫"<<hex<<(int)ReadId1[0]<<hex<<(int)ReadId1[1]<<hex<<(int)ReadId1[2]<<hex<<(int)ReadId1[3]<<endl;
					cout<<"ƒ£øÈ±‡∫≈£∫"<<id<<endl;
					cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==-1)
				{
					cout<<"√¸¡Ó÷¥––≥¨ ±£°"<<endl;
                }
				else if(iResult==80)
				{
					cout<<"…Ë±∏◊¥Ã¨√¶£°"<<endl;
                }
				else if(iResult==98)
				{
					cout<<"√¸¡Ó÷¥–– ß∞‹£°"<<endl;
                }
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
				}
				else if(iResult==-2)
				  {
				  	cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
				  }
				  else if(iResult==-3)
				  {
					  cout<<"√¸¡Ó∑¢ÀÕ ß∞‹£°"<<endl;
				  }
				  else if(iResult==-4)
				  {
					  cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈¥ÌŒÛ£°"<<endl;
				  }
				break;
		case 14: j=0;
				while(j<4)
				{
				   cout<<"«Î ‰»Î”≤±“«Æœ‰±‡∫≈£®∏ﬂŒª‘⁄«∞£©£¨“ª∏ˆ◊÷Ω⁄“ª∏ˆ◊÷Ω⁄ ‰»Î£∫";
					cin>>hex>>index;
					Box_WriteId[j]=(BYTE)index;
					j++;
				};
				cout<<"«Î ‰»Î”≤±“«Æ∏ﬂŒª£∫";
			    cin>>hex>>index;
				Box_WriteId[4]=(BYTE)index;
				cout<<"«Î ‰»Î”≤±“«ÆµÕŒª£∫";
			    cin>>hex>>index;
				Box_WriteId[5]=(BYTE)index;
				cout<<"«Î ‰»ÎƒÍ£®∏ﬂŒª£©£∫";
			    cin>>hex>>index;
				Box_WriteId[6]=(BYTE)index;
				cout<<"«Î ‰»ÎƒÍ£®µÕŒª£©£∫";
			    cin>>hex>>index;
				Box_WriteId[7]=(BYTE)index;
				cout<<"«Î ‰»Î‘¬£∫";
			    cin>>hex>>index;
				Box_WriteId[8]=(BYTE)index;
				cout<<"«Î ‰»Î»’£∫";
			    cin>>hex>>index;
				Box_WriteId[9]=(BYTE)index;
				cout<<"«Î ‰»Î ±£∫";
			    cin>>hex>>index;
				Box_WriteId[10]=(BYTE)index;
				cout<<"«Î ‰»Î∑÷£∫";
			    cin>>hex>>index;
				Box_WriteId[11]=(BYTE)index;
				cout<<"«Î ‰»Î√Î£∫";
			    cin>>hex>>index;
				Box_WriteId[12]=(BYTE)index;
			    iResult=coinmodule.Coin_Box_WriteID(Box_WriteId);
				if(iResult==0)
				{  
					cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==-1)
				{
					cout<<"√¸¡Ó÷¥––≥¨ ±£°"<<endl;
                }
				else if(iResult==80)
				{
					cout<<"…Ë±∏◊¥Ã¨√¶£°"<<endl;
                }
				else if(iResult==98)
				{
					cout<<"√¸¡Ó÷¥–– ß∞‹£°"<<endl;
                }
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
				}
				else if(iResult==-2)
				  {
				  	cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
				  }
				  else if(iResult==-3)
				  {
					  cout<<"√¸¡Ó∑¢ÀÕ ß∞‹£°"<<endl;
				  }
				  else if(iResult==-4)
				  {
					  cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈¥ÌŒÛ£°"<<endl;
				  }
				break;
		case 15:iResult=coinmodule.Coin_Box_ReadID(BoxReadId,id,count);
			   if(iResult==0)
				{
					//...................0---3
					//cout<<"”≤±“«Æœ‰±‡∫≈£®∏ﬂŒª‘⁄«∞£© «£∫"<<hex<<(int)BoxReadId[0]<<hex<<(int)BoxReadId[1]<<hex<<(int)BoxReadId[2]<<hex<<(int)BoxReadId[3]<<endl;
					cout<<"”≤±“«Æœ‰±‡∫≈ «£∫"<<id<<endl;
					//...................4
					//cout<<"”≤±“ ˝∏ﬂŒª"<<hex<<(int)BoxReadId[4]<<endl;
					//...................5
					//cout<<"”≤±“ ˝µÕŒª"<<hex<<(int)BoxReadId[5]<<endl;
					cout<<"”≤±“ ˝¡ø£∫"<<count<<endl;
					//...........ƒÍ‘¬»’ ±∑÷√Î 6--12
					cout<<hex<<(int)BoxReadId[0]<<hex<<(int)BoxReadId[1]<<"ƒÍ"
						<<hex<<(int)BoxReadId[2]<<"‘¬"
						<<hex<<(int)BoxReadId[3]<<"»’"
						<<hex<<(int)BoxReadId[4]<<" ±"
						<<hex<<(int)BoxReadId[5]<<"∑÷"
						<<hex<<(int)BoxReadId[6]<<"√Î"<<endl;
					cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==-1)
				{
					cout<<"√¸¡Ó÷¥––≥¨ ±£°"<<endl;
                }
				else if(iResult==80)
				{
					cout<<"…Ë±∏◊¥Ã¨√¶£°"<<endl;
                }
				else if(iResult==98)
				{
					cout<<"√¸¡Ó÷¥–– ß∞‹£°"<<endl;
                }
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
				}
				else if(iResult==-2)
				{
					cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
				}
				else if(iResult==-3)
				{
					cout<<"√¸¡Ó∑¢ÀÕ ß∞‹£°"<<endl;
				}
				else if(iResult==-4)
				{
					cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈¥ÌŒÛ£°"<<endl;
				}
				break;
		case 16:coinmodule.Coin_Program_Update();			   
				break;
		case 17:cout<<"≥Ã–Ú±‡≥Ãø™ º ˝æ›"<<endl;
			    //sleep(10);
			    coinmodule.Coin_Program_Begin(Program1);
				break;
		case 18:cout<<"≥Ã–Ú±‡≥Ã ˝æ›"<<endl;
			    //sleep(10);
			    coinmodule.Coin_Program_Send(Program2);
				break;
		case 19: coinmodule.Coin_Program_End();
				break;
		case 20:coinmodule.Coin_Program_APP();
				break;
		case 21: cout<<"«Î ‰»Î–°”⁄µ»”⁄0xFFµƒ÷µ,»Á”˚Ω· ¯«Î ‰»ÎOx100:";
				cin>>hex>>pre;
				while(pre<256)
				{
					pre1=(BYTE)pre;
//					m_PreResult.push_back(pre1);
					cout<<"«Î ‰»Î–°”⁄µ»”⁄0xFFµƒ÷µ,»Á”˚Ω· ¯«Î ‰»ÎOx100:";
					cin>>hex>>pre;	    
				}
				 break;
		case 22: is=false;
				 break;
		}
	}
		
   //system("pause");

   return 0;
}



int test_bill()
{
using namespace std;
using namespace BillGD;

	int actnum;
	int re,i;
	string sre;
	string vBoxID;
	GDCashModle GDCash;
	//int temp;  
	//std::cin >> temp;
	while(true)
	{
		WThrd::tr_sleepu( 1 );
		printf("**************************************************\n");
		printf("1 OpenCom\n");
		printf("2 CloseCom\n");
		printf("3 Reset\n");
		printf("4 WorkMode\n");
		printf("5 State\n");
		printf("6 BoxID\n");
		printf("7 Work\n");
		printf("8 Stop\n");
		printf("9 Return\n");
		printf("10 Reject\n");
		printf("11 Escrow\n");
		printf("12 Deposit\n");
		printf("13 Clear\n");
		printf("0 END\n");
		printf("Choose Act:\n");
		scanf("%d",&actnum);
		switch(actnum)
		{
		case 0:
			return 0;
		case 1:
			re=GDCash.OpenCom();
			printf("Open COM %s : re=%d\n", gp_conf->Get_bill_com_port().c_str(), re );
			break;
		case 2:
			re=GDCash.CloseCom();
			printf("Close COM : re=%d\n",re);
			break;
		case 3:
			re=GDCash.cmReset();
			printf("Reset : re=%d\n",re);
			break;
		case 4:
			re=GDCash.cmWorkMode(&sre);
			printf("WorkMode : re=%d , WorkMode=",re);
			cout<<sre;
			printf("\n");
			break;
		case 5:
			re=GDCash.cmState();
			printf("State, re=%d\n",re);
			if(re==0)
			for(i=0;i<GDCash.cErrorNum;i++)
			{
				printf("Error%d : %X\n",(i+1),GDCash.cErrorCode[i]);
			}
			printf("NoteValue : %d\n",GDCash.cNoteValue);
			printf("NoteNum : %d\n",GDCash.cNoteNum);
			printf("cErrorNum : %d\n",GDCash.cErrorNum);
			break;
		case 6:
			re=GDCash.cmBoxID(&vBoxID);
			printf("BoxID : re=%d , BoxID=",re);
			cout<<vBoxID;
			printf("\n");
			break;
		case 7:
			re=GDCash.cmWork();
			printf("Work : re=%d\n",re);
			break;
		case 8:
			re=GDCash.cmStop();
			printf("Stop : re=%d\n",re);
			break;
		case 9:
			re=GDCash.cmReturn();
			printf("Return : re=%d\n",re);
			break;
		case 10:
			re=GDCash.cmReject();
			printf("Reject : re=%d\n",re);
			break;
		case 11:
			re=GDCash.cmEscrow();
			printf("Escrow : re=%d\n",re);
			break;
		case 12:
			re=GDCash.cmDeposit();
			printf("Deposit : re=%d\n",re);
			break;
		case 13:
			re=GDCash.cmClear();
			printf("Clear : re=%d\n",re);
			break;
		}
		printf("**************************************************\n");
		printf("\n");
	}
	return 0;  
}



int test_bill_mei()
{
	gp_bill->Mei_Inhibit( 0 );
	gp_bill->Mei_Active( 0 );

	b8702_t::ROWTYPE &Rb8702(gp_db->GetTheRowb8702());
	
	Rb8702.m_PasswayTotal = 0;
		
	while(1)
	{
		Rb8702.m_cNoteValue = 0;
		Rb8702.m_cNoteNum = 0;

		gp_bill->Work();

		gp_bill->State();
	
		gp_bill->Stop();

		printf( "%d %d %d %d\n" , Rb8702.m_RtnVal  , Rb8702.m_cNoteValue ,  Rb8702.m_cNoteNum, Rb8702.m_PasswayTotal );

		if( Rb8702.m_RtnVal == 0 )
		{
			Rb8702.m_PasswayTotal += Rb8702.m_cNoteValue;
		}

		if( Rb8702.m_PasswayTotal > 34 )
			break;
	}

	gp_bill->Return1();

	while(1)
		WThrd::tr_sleep(3);
}


//
int test_ticket()
{
   int i;
	bool is=true;
	BYTE Index;
	BYTE Box1;
	BYTE Box;
	BYTE IsFail;
	BYTE Data5[4];
	/*±®ŒƒΩ‚ŒˆÀ˘”√±‰¡ø*/
	bool isOpen;
	bool isClose;
	string  str;
	BYTE bit;
	int iResult;

	CTicket cticket;
	//
	while(is)
	{
		cout<< std::string( 79, '=' ) <<endl;
		cout<<"¥Úø™¥Æø⁄£∫          0"<<endl
			<<"πÿ±’¥Æø⁄£∫          1"<<endl
			<<"∑¢ø®ƒ£øÈ¬÷—Ø£∫      2"<<endl
			<<"µÁª˙≤‚ ‘£∫          3"<<endl
			<<"∏¥Œª£∫              4"<<endl
			<<"≤È—Øƒ£øÈ∞Ê±æ£∫      5"<<endl
			<<"∑¢ø®£∫             6"<<endl
			<<"∂¡–¥Ω·π˚£∫         7"<<endl
			<<"ø®œ‰ªªœ‰£∫         8"<<endl
			<<"»°ƒ£øÈID£∫         9"<<endl
			<<"–¥ƒ£øÈID£∫         10"<<endl
			<<"‘§…Ë÷√µƒ∑µªÿ±®Œƒ£∫  11"<<endl
			<<"ÕÀ≥ˆ≥Ã–Ú£∫         12"<<endl;
		cout<< std::string( 44, '-' ) <<endl;
			
		cout<<"«Î—°‘Ò÷∏œÚµƒ≤Ÿ◊˜¥˙¬Î£∫" ;
	    cin>>dec>>i;
		switch(i)
		{
		case 0:  
			    isOpen=cticket.Ticket_CommOpen(); 
				if(isOpen==true)
				{ 
					/*bit=0x12;
					cout<<hex<<bit<<endl;
					cout<<bit<<endl;
					cout<<hex<<(int)bit<<endl;
					str="sfdf"&&(int)bit;
					cout<<str<<endl;*/
				  cout<<"¥Úø™¥Æø⁄≥…π¶£°"<<endl;
				}
				else
				{
				  cout<<"¥Úø™¥Æø⁄ ß∞‹£°"<<endl;
				}
				break;
		case 1: isClose=cticket.Ticket_CommClose();
			    if(isClose==true)
				{
				  cout<<"πÿ±’¥Æø⁄≥…π¶£°"<<endl;
				}
				else
				{
				  cout<<"πÿ±’¥Æø⁄ ß∞‹£°"<<endl;
				}
				break;
		case 2: BYTE SensorStatus[6];
			    iResult=cticket.Ticket_Poll(SensorStatus); 
				
				if(iResult==0)
				{

				 ///////////////////////////ø®œ‰«∞µΩŒªπ‚∏– SensorStatus[0]
					bit=0x02;
					bit&=SensorStatus[0];
					if(bit==0x00)
					{   
					cout<<"ø®œÚ«∞≤ªµΩŒª£°"<<endl;
					}
					else
					{
						cout<<"ø®œÚ«∞µΩŒª£°"<<endl;
					};
					bit=0x01;
					bit&=SensorStatus[0];
					if(bit==0x00)
					{   
						cout<<"«∞ø®œ‰ø’π‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"«∞ø®œ‰ø’π‚∏–∆˜±ª’⁄£°"<<endl;
					};
					///////////////////////////ø®œ‰∫ÛµΩŒªπ‚∏– SensorStatus[1]
					bit=0x02;
					bit&=SensorStatus[1];
					if(bit==0x00)
					{   
					   cout<<"ø®œÚ∫Û≤ªµΩŒª£°"<<endl;
					}
					else
					{
						cout<<"ø®œÚ∫ÛµΩŒª£°"<<endl;
					};
					bit=0x01;
					bit&=SensorStatus[1];
					if(bit==0x00)
					{   
						cout<<"∫Ûø®œ‰ø’π‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"∫Ûø®œ‰ø’π‚∏–∆˜±ª’⁄£°"<<endl;
					};
					///////////////////////////∆‰À˚µΩŒªπ‚∏– SensorStatus[2]
					bit=0x10;
					bit&=SensorStatus[2];
					if(bit==0x00)
					{   
						cout<<"ø®Ω´ø’∏–Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"ø®Ω´ø’∏–±ª’⁄£°"<<endl;
					};
					bit=0x08;
					bit&=SensorStatus[2];
					if(bit==0x00)
					{   
						cout<<"µ±«∞ø®œ‰ø’π‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"µ±«∞ø®œ‰ø’π‚∏–∆˜±ª’⁄£°"<<endl;
					};
					bit=0x04;
					bit&=SensorStatus[2];
					if(bit==0x00)
					{   
						cout<<"À´ø®π‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"À´ø®π‚∏–∆˜±ª’⁄£°"<<endl;
					};
					bit=0x02;
					bit&=SensorStatus[2];
					if(bit==0x00)
					{   
						cout<<"ø®≥ˆπ‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"ø®≥ˆπ‚∏–∆˜±ª’⁄£°"<<endl;
					};
					bit=0x01;
					bit&=SensorStatus[2];
					if(bit==0x00)
					{   
						cout<<"∂¡–¥π‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"∂¡–¥π‚∏–∆˜±ª’⁄£°"<<endl;
					};				
					cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==-1)
				{
					cout<<"√¸¡Ó÷¥––≥¨ ±£°"<<endl;
                }
				else if(iResult==80)
				{
					cout<<"…Ë±∏◊¥Ã¨√¶£°"<<endl;
                }
				else if(iResult==98)
				{
					cout<<"√¸¡Ó÷¥–– ß∞‹£°"<<endl;
                }
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
                }
				else if(iResult==-2)
				{
					cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
                }
				else if(iResult==-3)
				{
					cout<<"√¸¡Ó∑¢ÀÕ ß∞‹"<<endl;
                }
        else if(iResult==-4)
				{
					cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈”–¥Ì£°"<<endl;
                };
				break;
		case 3: cout<<"¥Úø™À˘”–µÁª˙£∫ 0"<<endl
					<<"πŒø®µÁª˙≤‚ ‘£∫ 1"<<endl
		            <<"ªªœ‰µÁª˙≤‚ ‘£∫ 2"<<endl
					<<"¥´ ‰µÁª˙≤‚ ‘£∫ 3"<<endl
					<<"µÁ¥≈Ã˙≤‚ ‘£∫   4"<<endl
					
					<<"µÁª˙≤‚ «πÿ±’£∫ 5"<<endl					
					<<"«Î—°‘Ò÷∏œÚµƒ≤Ÿ◊˜¥˙¬Î£∫";
			    cin>>dec>>i;
				switch(i)
				{
					case 0: Index=0x00; 
				            break;
		            case 1: Index=0x01;
				            break;
					case 2: Index=0x02; 
				            break;
					case 3: Index=0x03; 
				            break;
		            case 4: Index=0x04;
				            break;
					case 5: Index=0x05; 
				            break;	
				};			  
			    iResult=cticket.Ticket_PowerTest(Index);
				if(iResult==0)
				{
					cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==-1)
				{
					cout<<"√¸¡Ó÷¥––≥¨ ±£°"<<endl;
                }
				else if(iResult==80)
				{
					cout<<"…Ë±∏◊¥Ã¨√¶£°"<<endl;
                }
				else if(iResult==98)
				{
					cout<<"√¸¡Ó÷¥–– ß∞‹£°"<<endl;
                }
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
                }
				else if(iResult==-2)
				{
					cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
                }
				else if(iResult==-3)
				{
					cout<<"√¸¡Ó∑¢ÀÕ ß∞‹"<<endl;
                }
        else if(iResult==-4)
				{
					cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈”–¥Ì£°"<<endl;
                };                
				break;
		case 4: iResult=cticket.Ticket_Reset( );
			    if(iResult==0)
				{
					cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==-1)
				{
					cout<<"√¸¡Ó÷¥––≥¨ ±£°"<<endl;
                }
				else if(iResult==80)
				{
					cout<<"…Ë±∏◊¥Ã¨√¶£°"<<endl;
                }
				else if(iResult==98)
				{
					cout<<"√¸¡Ó÷¥–– ß∞‹£°"<<endl;
                }
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
                }
				else if(iResult==-2)
				{
					cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
                }
				else if(iResult==-3)
				{
					cout<<"√¸¡Ó∑¢ÀÕ ß∞‹"<<endl;
                }
        else if(iResult==-4)
				{
					cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈”–¥Ì£°"<<endl;
                };
				break;
		case 5: BYTE Major;
			    BYTE Minor;			   
			    iResult=cticket.Ticket_GetVersion(Major,Minor); 
				if(iResult==0)
				{   
					BYTE major1,major2,minor1,minor2;
					major2=0x0F;
					major2&=Major;
					bit=Major>>4;
					major1=0x0F;
					major1&=bit;

					minor2=0x0F;
					minor2&=Major;
					bit=Minor>>4;
					minor1=0x0F;
					minor1&=bit;
					cout<<"÷˜∞Ê±æ∫≈:"<<(int)major1<<(int)major2<<"  ∏±∞Ê±æ∫≈£∫"<<(int)minor1<<(int)minor2<<endl;
				    cout<<"÷˜∞Ê±æ∫≈:"<<hex<<(int)Major<<"  ∏±∞Ê±æ∫≈£∫"<<hex<<(int)Minor<<endl;
					cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==-1)
				{
					cout<<"√¸¡Ó÷¥––≥¨ ±£°"<<endl;
                }
				else if(iResult==80)
				{
					cout<<"…Ë±∏◊¥Ã¨√¶£°"<<endl;
                }
				else if(iResult==98)
				{
					cout<<"√¸¡Ó÷¥–– ß∞‹£°"<<endl;
                }
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
                }
				else if(iResult==-2)
				{
					cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
                }
				else if(iResult==-3)
				{
					cout<<"√¸¡Ó∑¢ÀÕ ß∞‹"<<endl;
                }
        else if(iResult==-4)
				{
					cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈”–¥Ì£°"<<endl;
                };
				break;
		case 6: cout<<"∆±œ‰1£∫ 0"<<endl
		            <<"∆±œ‰2£∫ 1"<<endl
					<<"∆±œ‰3£∫ 2"<<endl
					<<"∆±œ‰4£∫ 3"<<endl
					<<"«Î—°‘Ò÷∏œÚµƒ≤Ÿ◊˜¥˙¬Î£∫";
			    cin>>dec>>i;
				switch(i)
				{
					case 0: Box1=0x01;
				            break;
		            case 1: Box1=0x02;
				            break;
					case 2: Box1=0x03;
				            break;	
					case 3: Box1=0x04;
				            break;	
				};			  
			    BYTE Wrong;
				BYTE Data2[6];
			    iResult=cticket.Ticket_SendCard(Box1,Wrong,Data2);
				if(iResult==0)
				{   
				
				    bit=0x0F;
					bit&=Wrong;
					switch((int)bit)
					{
					case 1: cout<<"∆±œ‰ø’!"<<endl;
						  break;
                    case 2: cout<<"πŒø®π ’œ!"<<endl;
						  break;
					case 3: cout<<"¥´ ‰π ’œ!"<<endl;
						  break;
                    case 4: cout<<"À´ø®!"<<endl;
						  break;
					};
					 ///////////////////////////ø®œ‰«∞µΩŒªπ‚∏– Data2[0]
					bit=0x02;
					bit&=Data2[0];
					if(bit==0x00)
					{   
					cout<<"ø®œÚ«∞≤ªµΩŒª£°"<<endl;
					}
					else
					{
						cout<<"ø®œÚ«∞µΩŒª£°"<<endl;
					};
					bit=0x01;
					bit&=Data2[0];
					if(bit==0x00)
					{   
						cout<<"«∞ø®œ‰ø’π‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"«∞ø®œ‰ø’π‚∏–∆˜±ª’⁄£°"<<endl;
					};
					///////////////////////////ø®œ‰∫ÛµΩŒªπ‚∏– Data2[1]
					bit=0x02;
					bit&=Data2[1];
					if(bit==0x00)
					{   
					   cout<<"ø®œÚ∫Û≤ªµΩŒª£°"<<endl;
					}
					else
					{
						cout<<"ø®œÚ∫ÛµΩŒª£°"<<endl;
					};
					bit=0x01;
					bit&=Data2[1];
					if(bit==0x00)
					{   
						cout<<"∫Ûø®œ‰ø’π‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"∫Ûø®œ‰ø’π‚∏–∆˜±ª’⁄£°"<<endl;
					};
					///////////////////////////∆‰À˚µΩŒªπ‚∏– Data2[2]
					bit=0x10;
					bit&=Data2[2];
					if(bit==0x00)
					{   
						cout<<"ø®Ω´ø’∏–Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"ø®Ω´ø’∏–±ª’⁄£°"<<endl;
					};
					bit=0x08;
					bit&=Data2[2];
					if(bit==0x00)
					{   
						cout<<"µ±«∞ø®œ‰ø’π‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"µ±«∞ø®œ‰ø’π‚∏–∆˜±ª’⁄£°"<<endl;
					};
					bit=0x04;
					bit&=Data2[2];
					if(bit==0x00)
					{   
						cout<<"À´ø®π‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"À´ø®π‚∏–∆˜±ª’⁄£°"<<endl;
					};
					bit=0x02;
					bit&=Data2[2];
					if(bit==0x00)
					{   
						cout<<"ø®≥ˆπ‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"ø®≥ˆπ‚∏–∆˜±ª’⁄£°"<<endl;
					};
					bit=0x01;
					bit&=Data2[2];
					if(bit==0x00)
					{   
						cout<<"∂¡–¥π‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"∂¡–¥π‚∏–∆˜±ª’⁄£°"<<endl;
					};			
					cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==-1)
				{
					cout<<"√¸¡Ó÷¥––≥¨ ±£°"<<endl;
                }
				else if(iResult==80)
				{
					cout<<"…Ë±∏◊¥Ã¨√¶£°"<<endl;
                }
				else if(iResult==98)
				{
					cout<<"√¸¡Ó÷¥–– ß∞‹£°"<<endl;
                }
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
                }
				else if(iResult==-2)
				{
					cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
                }
				else if(iResult==-3)
				{
					cout<<"√¸¡Ó∑¢ÀÕ ß∞‹"<<endl;
                }
        else if(iResult==-4)
				{
					cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈”–¥Ì£°"<<endl;
                };
				break;
		case 7:  cout<<"Õ®µ¿1£∫ 0"<<endl
		            <<"Õ®µ¿2£∫ 1"<<endl
					<<"Õ®µ¿3£∫ 2"<<endl
					<<"Õ®µ¿4£∫ 3"<<endl
					<<"«Î—°‘Ò÷∏œÚµƒ≤Ÿ◊˜¥˙¬Î£∫";
			     cin>>dec>>i;
				 switch(i)
				 {
					case 0: Box=0x01;
				            break;
		            case 1: Box=0x02;
				            break;
					case 2: Box=0x03;
				            break;
					case 3: Box=0x04;
				            break;
				 };			 
			     cout<<"≥…π¶£∫ 0"<<endl
		             <<" ß∞‹£∫ 1"<<endl
					 <<"«Î—°‘Ò÷∏œÚµƒ≤Ÿ◊˜¥˙¬Î£∫";
				cin>>dec>>i;
				switch(i)
				{
					case 0: IsFail=0x01;
							break;
					case 1: IsFail=0x02;
							break;
					          				
				};			 
				BYTE Wrongcode;
				BYTE Data3[6];
			    iResult=cticket.Ticket_WriteRead(Box,IsFail,Wrongcode,Data3); 
				if(iResult==0)
				{   
					//BYTE major1,major2,minor1,minor2;
				    bit=0x0F;
					bit&=Wrongcode;
					switch((int)bit)
					{
					case 1: cout<<"∆±œ‰ø’!"<<endl;
						  break;
                    case 2: cout<<"πŒø®π ’œ!"<<endl;
						  break;
					case 3: cout<<"¥´ ‰π ’œ!"<<endl;
						  break;
                    case 4: cout<<"À´ø®!"<<endl;
						  break;
					};
						 ///////////////////////////ø®œ‰«∞µΩŒªπ‚∏– Data3[0]
					bit=0x02;
					bit&=Data3[0];
					if(bit==0x00)
					{   
					cout<<"ø®œÚ«∞≤ªµΩŒª£°"<<endl;
					}
					else
					{
						cout<<"ø®œÚ«∞µΩŒª£°"<<endl;
					};
					bit=0x01;
					bit&=Data3[0];
					if(bit==0x00)
					{   
						cout<<"«∞ø®œ‰ø’π‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"«∞ø®œ‰ø’π‚∏–∆˜±ª’⁄£°"<<endl;
					};
					///////////////////////////ø®œ‰∫ÛµΩŒªπ‚∏– Data3[1]
					bit=0x02;
					bit&=Data3[1];
					if(bit==0x00)
					{   
					   cout<<"ø®œÚ∫Û≤ªµΩŒª£°"<<endl;
					}
					else
					{
						cout<<"ø®œÚ∫ÛµΩŒª£°"<<endl;
					};
					bit=0x01;
					bit&=Data3[1];
					if(bit==0x00)
					{   
						cout<<"∫Ûø®œ‰ø’π‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"∫Ûø®œ‰ø’π‚∏–∆˜±ª’⁄£°"<<endl;
					};
					///////////////////////////∆‰À˚µΩŒªπ‚∏– Data3[2]
					bit=0x10;
					bit&=Data3[2];
					if(bit==0x00)
					{   
						cout<<"ø®Ω´ø’∏–Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"ø®Ω´ø’∏–±ª’⁄£°"<<endl;
					};
					bit=0x08;
					bit&=Data3[2];
					if(bit==0x00)
					{   
						cout<<"µ±«∞ø®œ‰ø’π‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"µ±«∞ø®œ‰ø’π‚∏–∆˜±ª’⁄£°"<<endl;
					};
					bit=0x04;
					bit&=Data3[2];
					if(bit==0x00)
					{   
						cout<<"À´ø®π‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"À´ø®π‚∏–∆˜±ª’⁄£°"<<endl;
					};
					bit=0x02;
					bit&=Data3[2];
					if(bit==0x00)
					{   
						cout<<"ø®≥ˆπ‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"ø®≥ˆπ‚∏–∆˜±ª’⁄£°"<<endl;
					};
					bit=0x01;
					bit&=Data3[2];
					if(bit==0x00)
					{   
						cout<<"∂¡–¥π‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"∂¡–¥π‚∏–∆˜±ª’⁄£°"<<endl;
					};			
					cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==-1)
				{
					cout<<"√¸¡Ó÷¥––≥¨ ±£°"<<endl;
                }
				else if(iResult==80)
				{
					cout<<"…Ë±∏◊¥Ã¨√¶£°"<<endl;
                }
				else if(iResult==98)
				{
					cout<<"√¸¡Ó÷¥–– ß∞‹£°"<<endl;
                }
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
                }
				else if(iResult==-2)
				{
					cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
                }
				else if(iResult==-3)
				{
					cout<<"√¸¡Ó∑¢ÀÕ ß∞‹"<<endl;
                }
        else if(iResult==-4)
				{
					cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈”–¥Ì£°"<<endl;
                };
				break;
		case 8: BYTE Wrong1;
			    BYTE Data4[6];
			    iResult=cticket.Ticket_ExchangeBox(Wrong1,Data4); 
				if(iResult==0)
				{   
					//BYTE major1,major2,minor1,minor2;
				    bit=0x0F;
					bit&=Wrong1;
					switch((int)bit)
					{
					case 1: cout<<"∆±œ‰ø’!"<<endl;
						  break;
                    case 2: cout<<"πŒø®π ’œ!"<<endl;
						  break;
					case 3: cout<<"¥´ ‰π ’œ!"<<endl;
						  break;
                    case 4: cout<<"À´ø®!"<<endl;
						  break;
					};
						 ///////////////////////////ø®œ‰«∞µΩŒªπ‚∏– Data2[0]
					bit=0x02;
					bit&=Data4[0];
					if(bit==0x00)
					{   
					cout<<"ø®œÚ«∞≤ªµΩŒª£°"<<endl;
					}
					else
					{
						cout<<"ø®œÚ«∞µΩŒª£°"<<endl;
					};
					bit=0x01;
					bit&=Data4[0];
					if(bit==0x00)
					{   
						cout<<"«∞ø®œ‰ø’π‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"«∞ø®œ‰ø’π‚∏–∆˜±ª’⁄£°"<<endl;
					};
					///////////////////////////ø®œ‰∫ÛµΩŒªπ‚∏– Data4[1]
					bit=0x02;
					bit&=Data4[1];
					if(bit==0x00)
					{   
					   cout<<"ø®œÚ∫Û≤ªµΩŒª£°"<<endl;
					}
					else
					{
						cout<<"ø®œÚ∫ÛµΩŒª£°"<<endl;
					};
					bit=0x01;
					bit&=Data4[1];
					if(bit==0x00)
					{   
						cout<<"∫Ûø®œ‰ø’π‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"∫Ûø®œ‰ø’π‚∏–∆˜±ª’⁄£°"<<endl;
					};
					///////////////////////////∆‰À˚µΩŒªπ‚∏– Data4[2]
					bit=0x10;
					bit&=Data4[2];
					if(bit==0x00)
					{   
						cout<<"ø®Ω´ø’∏–Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"ø®Ω´ø’∏–±ª’⁄£°"<<endl;
					};
					bit=0x08;
					bit&=Data4[2];
					if(bit==0x00)
					{   
						cout<<"µ±«∞ø®œ‰ø’π‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"µ±«∞ø®œ‰ø’π‚∏–∆˜±ª’⁄£°"<<endl;
					};
					bit=0x04;
					bit&=Data4[2];
					if(bit==0x00)
					{   
						cout<<"À´ø®π‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"À´ø®π‚∏–∆˜±ª’⁄£°"<<endl;
					};
					bit=0x02;
					bit&=Data4[2];
					if(bit==0x00)
					{   
						cout<<"ø®≥ˆπ‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"ø®≥ˆπ‚∏–∆˜±ª’⁄£°"<<endl;
					};
					bit=0x01;
					bit&=Data4[2];
					if(bit==0x00)
					{   
						cout<<"∂¡–¥π‚∏–∆˜Œ¥’⁄£°"<<endl;
					}
					else
					{
						cout<<"∂¡–¥π‚∏–∆˜±ª’⁄£°"<<endl;
					};			
					cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==-1)
				{
					cout<<"√¸¡Ó÷¥––≥¨ ±£°"<<endl;
                }
				else if(iResult==80)
				{
					cout<<"…Ë±∏◊¥Ã¨√¶£°"<<endl;
                }
				else if(iResult==98)
				{
					cout<<"√¸¡Ó÷¥–– ß∞‹£°"<<endl;
                }
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
                }
				else if(iResult==-2)
				{
					cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
                }
				else if(iResult==-3)
				{
					cout<<"√¸¡Ó∑¢ÀÕ ß∞‹"<<endl;
                }
        else if(iResult==-4)
				{
					cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈”–¥Ì£°"<<endl;
                };
				break;
		case 9: BYTE Data1[4];
			   iResult=cticket.Ticket_ReadId(Data1);
			   if(iResult==0)
			   {
				   cout<<"∆±œ‰1:"<<hex<<(int)Data1[0]<<"∆±œ‰2:"<<hex<<(int)Data1[1]
				       <<"∆±œ‰3:"<<hex<<(int)Data1[2]<<"∆±œ‰4:"<<hex<<(int)Data1[3]<<endl;				       
				   cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==-1)
				{
					cout<<"√¸¡Ó÷¥––≥¨ ±£°"<<endl;
                }
				else if(iResult==80)
				{
					cout<<"…Ë±∏◊¥Ã¨√¶£°"<<endl;
                }
				else if(iResult==98)
				{
					cout<<"√¸¡Ó÷¥–– ß∞‹£°"<<endl;
                }
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
                }
				else if(iResult==-2)
				{
					cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
                }
				else if(iResult==-3)
				{
					cout<<"√¸¡Ó∑¢ÀÕ ß∞‹"<<endl;
                }
        else if(iResult==-4)
				{
					cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈”–¥Ì£°"<<endl;
                };
				break;
		case 10:Data5[0]=0x01;
			    Data5[1]=0x02;
			    Data5[2]=0x03;
			    Data5[3]=0x04; 
			    iResult=cticket.Ticket_WriteId(Data5); 
				if(iResult==0)
			   {
				cout<<"√¸¡Ó÷¥––≥…π¶£°"<<endl;
				}
				else if(iResult==-1)
				{
					cout<<"√¸¡Ó÷¥––≥¨ ±£°"<<endl;
                }
				else if(iResult==80)
				{
					cout<<"…Ë±∏◊¥Ã¨√¶£°"<<endl;
                }
				else if(iResult==98)
				{
					cout<<"√¸¡Ó÷¥–– ß∞‹£°"<<endl;
                }
				else if(iResult==99)
				{
					cout<<"Ω‚∞¸≥ˆ¥Ì«Î«Û÷ÿ∑¢£°"<<endl;
                }
				else if(iResult==-2)
				{
					cout<<"∂Àø⁄Œ¥¥Úø™£°"<<endl;
                }
				else if(iResult==-3)
				{
					cout<<"√¸¡Ó∑¢ÀÕ ß∞‹"<<endl;
                }
        else if(iResult==-4)
				{
					cout<<"∑µªÿ±®Œƒ√¸¡ÓªÚ’ﬂ–Ú¡–∫≈”–¥Ì£°"<<endl;
                };
				break;
		/*case 11:cout<<"«Î ‰»Î–°”⁄µ»”⁄0xFFµƒ÷µ,»Á”˚Ω· ¯«Î ‰»ÎOx100:";
				cin>>hex>>pre;
				while(pre<256)
				{
					pre1=(BYTE)pre;
					m_PreResult.push_back(pre1);
					cout<<"«Î ‰»Î–°”⁄µ»”⁄0xFFµƒ÷µ,»Á”˚Ω· ¯«Î ‰»ÎOx100:";
					cin>>hex>>pre;	    
				}
				break;*/
				
		case 12: is=false;
				 break;
		}
	}

    system("pause");
	return 0;
}



//
int test_many_keyinput()
{
	for( int i = 0 ; i < 999944 ; i ++ )
	{
		de_frontinput_t  *p;
		de_frontinput_t   f;

		p = &f;
		p->FrontInit(9999);
	}
	return 0;
}


void test_double()
{
    double *p1=(double*)100;
    double *p2=(double*)117;
    printf("%d\n",p1-p2);
    printf("%d\n",p2-p1);
}



void test_send6002aa()
{
	a6002_t::ROWTYPE r;

	r.m_lTicketTradeTerminalFlow = 1;
	gp_db->m_a6002.Add( r );

	r.m_lTicketTradeTerminalFlow = 2;
	gp_db->m_a6002.Add( r );
	 
	r.m_lTicketTradeTerminalFlow = 3;
	gp_db->m_a6002.Add( r );


	gp_tcpmsg->SendTrade6002_range( 1, 3 );
}



void test_printer()
{
	gp_printer->PrintLineAsync( "°∞a°±Œ™¡Àºıª∫»´«Ú±‰≈Øµƒ«˜ ∆£¨ø∆—ßº“√«œÎæ°¡À∏˜÷÷∞Ï∑®£¨∂¯”–»À‘ÚÃ·≥ˆ¡À◊Ëµ≤Ã´—Ùπ‚Ω¯»Îµÿ«ÚµƒœÎ∑®£¨’‚ø…––¬£øŒ“√«æøæπ∏√◊ˆ–© ≤√¥£ø”√∏ƒ◊∞π˝µƒ∑…ª˙≈Á…‰≥ˆ¡ÚÀ·æÕø…“‘»√±±º´…œø’µƒÃÏø’±£≥÷ª“ˆ≤◊¥Ã¨∫√º∏ƒÍ£¨°∞∂¯’‚÷ª–Ë“™÷∆◊˜“ª≤ø∫√¿≥ŒÎ¥Û∆¨µƒ∑—”√°±£¨π˛∑¥Û—ßµƒŒÔ¿Ì—ßº“¥˜Œ¨&#8226;ª˘Àº£®DavidKeith£©»Á¥ÀÀµµ¿°£À˚ªπ∂œ—‘£¨÷ª–Ëª®10“⁄√¿‘™£¨æÕƒ‹»√’˚∏ˆµÿ«Ú‘⁄2020ƒÍ◊Û”“±ª¡ÚÀ·“∫µŒ∞¸π¸°£" );
	gp_printer->HalfCutAsync();

	while(1)
		WThrd::tr_sleep(3);
}



void test_top_scr()
{
	gp_topscr->DispStr( "…œ∫£µÿÃ˙µƒº™œÈŒÔ «≥©≥©°£≥©≥© «“ª∏ˆ¿¥◊‘Œ¥¿¥µƒ–°ª˙∆˜»À£¨‘≤»Ûµƒ¡˜œﬂ–Õ∂Ø∏– Æ◊„£¨Œ¢–¶µƒ—€æ¶Õ∏¬∂«◊«–£¨œ÷¥˙ªØµƒ◊∞±∏ø∆ºº Æ◊„£¨ÃÂƒ⁄‘Ã∫¨◊≈»»«È”Î¡¶¡ø°£≥©≥©µƒ…Ëº∆£¨—›“Ô≥ˆ…œ∫£µÿÃ˙”Î∂º –µƒ√‹«–πÿœµ£¨œ÷¥˙°¢∂Ø∏–°¢ ±…–°£≥©≥©£¨ «…œ∫£µÿÃ˙µƒ–ŒœÛªØ…Ì£¨Œ¢–¶◊‘–≈µƒ±Ì«È⁄π Õ≥ˆ…œ∫£µÿÃ˙ª˝º´Ω¯»°Œﬁœﬁø™Õÿµƒ∆∑≈∆–ŒœÛ°£" );

	while(1)
		WThrd::tr_sleep(3);
}




void test_emt_ticket1()
{
	gp_emitticket->MkTicketReady();
	
	gp_emitticket->eTicket_SendOut();

	gp_emitticket->eTicket_SendIn();

	gp_emitticket->eTicket_ExchangeBox();


	while(1)
		WThrd::tr_sleep(3);
}



void test_read_card()
{
	gp_reader1->rReadCard();
	gp_reader1->rAbort();

	gp_reader1->rSaleCard2( 100 );


	while(1)
		WThrd::tr_sleep(3);
}

// [in]  iToBeChange ’“¡„Ω∂Ó (“‘∑÷Œ™µ•Œª)
// [in]  iRMB50 ”≤±“—≠ª∑œ‰÷–5Ω«∏ˆ ˝
// [in]  iRMB100 ”≤±“—≠ª∑œ‰÷–1‘™∏ˆ ˝
// [in]  iRMB500 ÷Ω±“—≠ª∑œ‰÷–5‘™∏ˆ ˝   (÷Ω±“œ‰÷– ˝æ›ƒø«∞Œ™0£¨–Ë∫Û√Ê‘Ÿ≈™)
// [in]  iRMB1000 ÷Ω±“—≠ª∑œ‰÷–10‘™∏ˆ ˝
// [in]  iRMB2000 ÷Ω±“—≠ª∑œ‰÷–20‘™∏ˆ ˝
// [in]  iRMB5000 ÷Ω±“—≠ª∑œ‰÷–50‘™∏ˆ ˝
// [out] iChangeCoin  ø…“‘’“¡„µƒ”≤±“«Æ ˝   -> ,µ´”≤±“µ◊≤„∏¯µƒ «’“¡„∏ˆ ˝£¨À˘“‘‘⁄Õ‚√Ê»‘–Ë“™◊™ªØŒ™∏ˆ ˝ (“‘∑÷Œ™µ•Œª)
// [out] iChangeBill  ø…“‘’“¡„µƒ÷Ω±“«Æ ˝  (“‘‘™Œ™µ•Œª)
// returnvalue :
// true:’˝≥£’“¡„
// false:≤ªƒ‹’“¡„
bool isChangeOK( int iToBeChange, int iRMB50, int iRMB100, int iRMB500, int iRMB1000, int iRMB2000,int iRMB5000, long *iChangeCoin /*= NULL*/ ,long *iChangeBill /*= NULL*/ )
{

	int n50, n100, n500, n1000, n2000, n5000;
	n50 = n100 = n500 = n1000 = n2000 = n5000 = 0;
	if( 1 != gp_bill->m_iIsNotBillChange )
	{
		//≈–∂œ50‘™
		n5000 = iToBeChange/5000;
		if( iRMB5000 < n5000 )
		{
			iToBeChange -= 5000 *  iRMB5000;
			n5000 = iRMB5000;
		}
		else
		{
			iToBeChange -= 5000 * n5000;
		}

		//≈–∂œ20‘™
		n2000 = iToBeChange/2000;
		if( iRMB2000 < n2000 )
		{
			iToBeChange -= 2000 *  iRMB2000;
			n2000 = iRMB2000;
		}
		else
		{
			iToBeChange -= 2000 * n2000;
		}

		//≈–∂œ10‘™
		n1000 = iToBeChange/1000;
		if( iRMB1000 < n1000 )
		{
			iToBeChange -= 1000 *  iRMB1000;
			n1000 = iRMB1000;
		}
		else
		{
			iToBeChange -= 1000 * n1000;
		}

		//≈–∂œ5‘™
		n500 = iToBeChange/500;
		if( iRMB500 < n500 )
		{
			iToBeChange -= 500 *  iRMB500;
			n500 = iRMB500;
		}
		else
		{
			iToBeChange -= 500 * n500;
		}
	}

	//≈–∂œ1‘™
	n100 = iToBeChange/100;
	if( iRMB100 < n100 )
	{
		iToBeChange -= 100 *  iRMB100;
		n100 = iRMB100;
	}
	else
	{
		iToBeChange -= 100 * n100;
	}

	//≈–∂œ5Ω«
	n50 = iToBeChange/50;
	if( iRMB50 < n50 )
	{
		iToBeChange -= 50 *  iRMB50;
		n50 = iRMB50;
	}
	else
	{
		iToBeChange -= 50 * n50;
	}

	LOGSTREAM( gp_log[LOGAPP], LOGPOSI << "iToBeChange=" << iToBeChange <<" coinnum="<<n100 + n50 <<" m_CoinChgMaxNum="<<wl::SStrf::sltoa(gp_db->m_a3003.GetRow(0).m_CoinChgMaxNum)<<
		      " billnum="<<n500 + n1000 + n2000 + n5000 <<" m_BillChgMaxNum="<<wl::SStrf::sltoa(gp_db->m_a3003.GetRow(0).m_BillChgMaxNum) );


	if( (iToBeChange == 0 ) && 
		( ( n100 + n50 ) <= gp_db->m_a3003.GetRow(0).m_CoinChgMaxNum ) &&
		( n500 + n1000 + n2000 + n5000 ) <= gp_db->m_a3003.GetRow(0).m_BillChgMaxNum )
	{
		if( iChangeCoin != NULL && iChangeBill != NULL )
		{
			*iChangeCoin = (long)(n100*100 + n50*50);
			*iChangeBill = (long)(n500*5 + n1000*10 + n2000*20 + n5000*50);
		}
		return true;
	}
	
	return false;
}

// [in]  iChangeLimit ’“¡„Ω∂Ó (“‘∑÷Œ™µ•Œª)
// [out] iChangeCoin  ø…“‘’“¡„µƒ”≤±“«Æ ˝   -> ,µ´”≤±“µ◊≤„∏¯µƒ «’“¡„∏ˆ ˝£¨À˘“‘‘⁄Õ‚√Ê»‘–Ë“™◊™ªØŒ™∏ˆ ˝ (“‘∑÷Œ™µ•Œª)
// [out] iChangeBill  ø…“‘’“¡„µƒ÷Ω±“«Æ ˝  (“‘‘™Œ™µ•Œª)
bool CanChange( int iChangeLimit /*= 4900*/ ,long *iChangeCoin /*= NULL*/ ,long *iChangeBill /*= NULL*/  )
{
	bool ret = true;
	if( iChangeLimit < 50 )   //–°”⁄5Ω«
	{
		LOGSTREAM( gp_log[LOGAPP], LOGPOSI << "Invalid Change:" << iChangeLimit );
		return 0;
	}

	int iRMB50 ,iRMB100 ,iRMB500 ,iRMB1000 ,iRMB2000 ,iRMB5000;
	iRMB50 = iRMB100 = iRMB500 = iRMB1000 = iRMB2000 = iRMB5000 = 0;
	
	b8701_t::ROWTYPE rcoin;
	if(1)
	{
		MYAUTOLOCK( gp_db->m_b8701.m_ut_tbl_lck );
		rcoin = gp_db->m_b8701.GetRow(0);
	}

	b8702_t::ROWTYPE rbill;
	if(1)
	{
		MYAUTOLOCK( gp_db->m_b8702.m_ut_tbl_lck );
		rbill = gp_db->m_b8702.GetRow(0);
	}
		
	iRMB50  = rcoin.m_A5MaoCycleChg /*+ rcoin.m_A5MaoSpecialChg*/ ;
	iRMB100 = rcoin.m_A1YuanCycleChg /*+ rcoin.m_A1YuanSpecialChg*/ ;
	gp_bill->dBill_QueryCashUint();
	for(int i=0;i<4;i++)
	{
		if( rbill.m_ReDenomination.a[i] == 500 )  iRMB500  = rbill.m_ReNumber.a[i];
		if( rbill.m_ReDenomination.a[i] == 1000 ) iRMB1000 = rbill.m_ReNumber.a[i];
		if( rbill.m_ReDenomination.a[i] == 2000 ) iRMB2000 = rbill.m_ReNumber.a[i];
		if( rbill.m_ReDenomination.a[i] == 5000 ) iRMB5000 = rbill.m_ReNumber.a[i];
	}

	// ≈–∂œ√ø∏ˆµµŒªµƒ√Ê∂Ó
	if( iChangeLimit == 4900 )
	{
		for (int i=100;i<=iChangeLimit;i+=100)
		{
			if ( !isChangeOK( i, iRMB50, iRMB100, iRMB500, iRMB1000, iRMB2000,iRMB5000,iChangeCoin,iChangeBill ) )
			{
				ret = false;
				LOGSTREAM( gp_log[LOGAPP], LOGPOSI << "cannot change:" << i );
				break;
			}
		}
	}
	else
	{
		return isChangeOK( iChangeLimit, iRMB50, iRMB100, iRMB500, iRMB1000, iRMB2000,iRMB5000 ,iChangeCoin,iChangeBill );
	}
	
	return ret;


}

void AddTransDataTo6000( a_waiter_t_rowtype & pwaiterdata )
{
	LOGSTREAM( gp_log[LOGAPP], LOGPOSI );

	//π∫∆± « Ù”⁄ƒƒ∏ˆ∆±º€«¯”Ú
	//«Û≥ˆrow4002
	a4002_t::ROWTYPE  row4002;

	if(1)
	{
		MYAUTOLOCK( gp_db->m_a4002.m_ut_tbl_lck );
		a4002_t::RPSTYPE rps[9];

		//row4002_out = a4002_t::ROWTYPE();

		gp_db->m_a4002.SelEc_biDelFlag( 0, rps[1] ); 
		gp_db->m_a4002.SelEc_biIsAffect( 1, rps[2] ); 
		gp_db->m_a4002.RpsAnd( rps[1], rps[2], rps[3] );
		if( gp_db->m_a4002.GetRowCount( rps[3] ) == 0 ) return ;

		gp_db->m_a4002.SelEc_TicketType( 100, rps[1] );
		gp_db->m_a4002.RpsAnd( rps[1], rps[3], rps[4] );
		if( gp_db->m_a4002.GetRowCount( rps[4] ) == 0 ) return ;

		row4002 = gp_db->m_a4002.GetRow( rps[4], 0 );
	}

	//«Û≥ˆrow4003
	a4003_t::ROWTYPE  row4003;

	if(1)
	{
		MYAUTOLOCK( gp_db->m_a4003.m_ut_tbl_lck );
		a4003_t::RPSTYPE rps[9];

		gp_db->m_a4003.SelEc_biDelFlag( 0, rps[1] ); 
		gp_db->m_a4003.SelEc_biIsAffect( 1, rps[2] ); 
		gp_db->m_a4003.RpsAnd( rps[1], rps[2], rps[3] );
		if( gp_db->m_a4003.GetRowCount( rps[3] ) == 0 ) return ;

		gp_db->m_a4003.SelEc_lFareRateIdx( row4002.m_B0_FullFareRateIdx, rps[1] );
		gp_db->m_a4003.RpsAnd( rps[1], rps[3], rps[4] );
		if( gp_db->m_a4003.GetRowCount( rps[4] ) == 0 ) return ;

		row4003 = gp_db->m_a4003.GetRow( rps[4], 0 );
	}

	//±È¿˙4004£¨∏˘æ›zone«Û≥ˆ4003÷–µƒº€∏Ò,‘Ÿgroup
	if(1)
	{
		MYAUTOLOCK( gp_db->m_a4004.m_ut_tbl_lck );
		
		for( long i = 0; i < gp_db->m_a4004.GetRowCount(); i++ )
		{
			int z;
			a4004_t::ROWTYPE & row4004(gp_db->m_a4004.GetRow(i));

			if( row4004.m_biDelFlag != 0 ) continue;
			if( row4004.m_biIsAffect != 1 ) continue;

			if(1)
			{
					z = row4003.m_FareRate.a[row4004.m_lZone] / 100 ;

					LOGSTREAM( gp_log[LOGAPP], LOGPOSI << "cacl 6000=m_lZone = :" << row4004.m_lZone<<" z="<<z <<" m_TickePrice1="<< pwaiterdata.m_TickePrice1 );

					if( pwaiterdata.m_TickePrice1 != z )
					{
						continue;
					}

					//’“µΩ«¯”Ú£¨Ω´6000÷–∂‘”¶«¯”ÚÃÓ÷µ

					gp_db->m_a6000.GetRow(0).m_Reg.a[ row4004.m_lZone ] += pwaiterdata.m_TicketoutActual;
					gp_db->m_a6000.GetRow(0).m_Reg.a[ 21 + row4004.m_lZone ] += ( pwaiterdata.m_TicketoutActual* pwaiterdata.m_TickePrice1 / 100 );
					gp_db->m_a6000.GetRow(0).m_Reg.a[ 42 ] += pwaiterdata.m_ReceiveCoin / 100;
					gp_db->m_a6000.GetRow(0).m_Reg.a[ 43 ] += pwaiterdata.m_ReceiveBill / 100;
					gp_db->m_a6000.GetRow(0).m_Reg.a[ 44 ] += pwaiterdata.m_CoinRecycleChgActual /*+ pwaiterdata.m_CoinSpecialChgActual*/;
					gp_db->m_a6000.GetRow(0).m_Reg.a[ 45 ] += pwaiterdata.m_BilchgActual;
					break;

			}

		}

	}


}


void AddMachineDataTo6000()
{
	LOGSTREAM( gp_log[LOGAPP], LOGPOSI );

	long lBillVaultAmount = 0;
	long lBillChgBoxAmount = 0;

	gp_bill->dBill_QueryCashUint();

	b8702_t::ROWTYPE rbill;
	if(1)
	{
		MYAUTOLOCK( gp_db->m_b8702.m_ut_tbl_lck );
		rbill = gp_db->m_b8702.GetRow(0);
	}

	for(int i=0;i<4;i++)
	{
		if( rbill.m_ReDenomination.a[i] == 500 )  lBillChgBoxAmount += rbill.m_ReNumber.a[i] * 5;
		if( rbill.m_ReDenomination.a[i] == 1000 ) lBillChgBoxAmount += rbill.m_ReNumber.a[i] * 10;
		if( rbill.m_ReDenomination.a[i] == 2000 ) lBillChgBoxAmount += rbill.m_ReNumber.a[i] * 20;
		if( rbill.m_ReDenomination.a[i] == 5000 ) lBillChgBoxAmount += rbill.m_ReNumber.a[i] * 50;
	}

	lBillVaultAmount = rbill.m_Pieces.a[5] * 5   + rbill.m_Pieces.a[10] * 10 +
		               rbill.m_Pieces.a[20] * 20 + rbill.m_Pieces.a[50] * 50 +
					   rbill.m_Pieces.a[100] * 100;


	gp_db->m_a6000.GetRow(0).m_Reg.a[ 46 ] = gp_db->m_b8701.GetRow(0).m_A1YuanStoreBox;
	gp_db->m_a6000.GetRow(0).m_Reg.a[ 47 ] = gp_db->m_b8701.GetRow(0).m_A1YuanStoreBox / 2;
	gp_db->m_a6000.GetRow(0).m_Reg.a[ 48 ] = 0;
	gp_db->m_a6000.GetRow(0).m_Reg.a[ 49 ] = gp_db->m_b8701.GetRow(0).m_A1YuanCycleChg;
	gp_db->m_a6000.GetRow(0).m_Reg.a[ 50 ] = gp_db->m_b8701.GetRow(0).m_A5MaoCycleChg / 2;
	gp_db->m_a6000.GetRow(0).m_Reg.a[ 51 ] = lBillVaultAmount;
	gp_db->m_a6000.GetRow(0).m_Reg.a[ 52 ] = lBillChgBoxAmount;
	gp_db->m_a6000.GetRow(0).m_Reg.a[ 53 ] = 0;
	gp_db->m_a6000.GetRow(0).m_Reg.a[ 54 ] = 0;
	gp_db->m_a6000.GetRow(0).m_Reg.a[ 55 ] = 0;
}


int ReturnCoinAndBill( a_waiter_t_rowtype&  waiter_data )
{
	
	if(waiter_data.m_ReceiveCoin >0)
	{
		gp_coin->returnCoin();//ÕÀ”≤±“
		//waiter_data.m_ReceiveCoin = 0;
		//waiter_data.m_ReceiveTotal = waiter_data.m_ReceiveBill;
	}

	if(waiter_data.m_ReceiveBill >0)
	{
		gp_bill->dBill_Refund();//add by jfren @20161122
		//waiter_data.m_ReceiveBill = 0;
		//waiter_data.m_ReceiveTotal = waiter_data.m_ReceiveCoin;

		//÷ª–Ë“™”–÷Ω±“
		bu_quickflow_t::qf_counter_t  iQf1_user_idle;
		double iQf1_user_idleMAX = 15;

		gp_qf->GetQf( iQf1_user_idle );

		while(1)
		{
			if( 0 == gp_db->m_b8702.GetRow(0).m_wReturnShutter ||
				gp_qf->IsLongQf( iQf1_user_idle , iQf1_user_idleMAX ) )
			{
				//Œ¥¿¥Ω´ «“™Ω´÷Ω±“≈Á≥ˆ
				break;
			}
			
		}
	}

	
}
